(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{164:function(t,e,a){"use strict";function o(t,e,a,o,s,i,r,n){var c,l="function"==typeof t?t.options:t;if(e&&(l.render=e,l.staticRenderFns=a,l._compiled=!0),o&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),r?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},l._ssrRegister=c):s&&(c=n?function(){s.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(t,e){return c.call(e),d(t,e)}}else{var m=l.beforeCreate;l.beforeCreate=m?[].concat(m,c):[c]}return{exports:t,options:l}}a.d(e,"a",(function(){return o}))},194:function(t,e,a){var o=a(293);"string"==typeof o&&(o=[[t.i,o,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(133)(o,s);o.locals&&(t.exports=o.locals)},292:function(t,e,a){"use strict";a(194)},293:function(t,e,a){(t.exports=a(132)(!1)).push([t.i,"th {\n  font-weight: 400;\n  cursor: pointer;\n}\nth.selecionado {\n  font-weight: 800;\n}",""])},45:function(t,e,a){"use strict";a.r(e);var o={data:function(){return{ambientes:"",origem:"",estabelecimento:"",nome:"",observacao:"",terceiro:"",codigo:"",subcodigo:"",id:"",erro:!1,editar:!1,carregando:!0,mensagem:"Carregando Ambiente de Trabalho cadastrados",html:'<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>',montou:!1,deletar:"",coluna:"",ordem:!0,termo:"",selecionado:"codigo",idTabela:"#tabelaListagem"}},methods:{camelize:function(t){return"PRÓPRIO"==t?"Próprio":"TERCEIROS"==t?"Terceiros":"SERVIÇOS_TERCEIROS"==t?"Serviços Terceiros":void 0},carregar:function(t){this.mensagem=t,this.html='<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>',this.carregando=!0},sucesso:function(t){this.mensagem=t,this.html='<i class="fa fa-check-circle fa-2x fa-fw"></i>';var e=this;setTimeout((function(){e.carregando=!1}),800)},alerta:function(t){this.mensagem=t,this.html='<i class="fa fa-close fa-2x fa-fw"></i>';var e=this;setTimeout((function(){e.carregando=!1}),1e3)},salvar:function(){this.carregar("Salvando novo Ambiente de Trabalho...");var t=this;axios.post("/empresas/ambientes-de-trabalho",{nome:t.nome,origem:t.origem,estabelecimento:t.estabelecimento,terceiro:t.terceiro,observacao:t.observacao,codigo:t.codigo,subcodigo:t.subcodigo}).then((function(e){"existente"==e.data?(t.codigo="",t.erro=!0,t.alerta("Código já existente, verifique!")):(t.ambientes=e.data,t.descricao="",t.codigo="",t.erro=!1,t.$nextTick((function(){t.fechar(),t.sucesso("Salvo com sucesso!")})),t.sucesso("Salvo com sucesso!"))}))},atualizar:function(){var t=this;axios.post("/empresas/ambientes-de-trabalho/update/"+this.id,{nome:t.nome,origem:t.origem,estabelecimento:t.estabelecimento,terceiro:t.terceiro,observacao:t.observacao,codigo:t.codigo,subcodigo:t.subcodigo}).then((function(e){"erro"==e.data?(t.codigo="",t.erro=!0):(t.ambientes=e.data,t.descricao="",t.codigo="",t.erro=!1,t.$nextTick((function(){t.fechar(),t.sucesso("Atualizado com sucesso!")})))}))},abrir:function(){$(this.idTabela).DataTable().destroy(),this.$refs.myModal.show()},preencher:function(t){this.carregar("Carregando dados..."),this.nome=t.nomeAmbienteTrabalho,this.codigo=t.idAmbienteTrabalho,this.id=t.idAmbienteTrabalho,this.origem=t.idOrigem,this.subcodigo=t.subCodigo,this.estabelecimento=t.estabelecimento,this.terceiro=t.inscricaoTerceiro,this.observacao=t.observacao,this.editar=!0,this.abrir(),this.sucesso("Dados carregados!")},remover:function(t){this.deletar=t.idAmbienteTrabalho,this.$refs.modalCerteza.show(),$(this.idTabela).DataTable().destroy()},ok:function(t){t.preventDefault(),this.editar?this.atualizar():this.salvar()},fechar:function(){this.$root.$emit("montou",[this.idTabela]),this.editar=!1,this.nome="",this.origem="",this.estabelecimento="",this.subcodigo="",this.terceiro="",this.observacao="",this.codigo="",this.id="",this.$refs.myModal.hide()},fecharCerteza:function(){this.$root.$emit("montou",[this.idTabela]),this.$refs.modalCerteza.hide()},certeza:function(){this.carregar("Removendo Ambiente de Trabalho...");var t=this;axios.get("/empresas/ambientes-de-trabalho/remover/"+this.deletar).then((function(e){"erro"!=e.data?(t.ambientes=e.data,t.$nextTick((function(){t.fecharCerteza(),t.sucesso("Excluido com sucesso!")}))):t.$nextTick((function(){t.fecharCerteza(),t.alerta("Erro ao excluir!")}))}))}},mounted:function(){var t=this;axios.get("/empresas/ambientes-de-trabalho/list").then((function(e){t.ambientes=e.data,t.montou=!0,setTimeout((function(){t.$root.$emit("montou",[t.idTabela]),t.carregando=!1}),200)})),$("#myModal").on("hidden.bs.modal",(function(e){t.descricao="",t.codigo="",t.editar=!1,t.id=""}))}},s=(a(292),a(164)),i=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content"},[t.carregando?a("BlockUI",{attrs:{message:t.mensagem,html:t.html}}):t._e(),t._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-bottom":"15px","margin-top":"10px"}},[a("div",{staticClass:"col-md-6"},[a("button",{staticClass:"btn btn-success btn-sm",attrs:{id:"modal",type:"button"},on:{click:t.abrir}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Incluir")]),t._v(" "),t.montou?a("download-excel",{staticClass:"btn btn-sm btn-secondary",attrs:{data:this.ambientes,name:"ambientes.xls"}},[a("i",{staticClass:"far fa-save"}),t._v(" Exportar\n            ")]):t._e()],1)]),t._v(" "),t.montou?a("div",{staticClass:"box box-info"},[a("div",{staticClass:"box-body table-responsive"},[a("table",{staticClass:"table table-hover table-striped",attrs:{id:"tabelaListagem"}},[t._m(0),t._v(" "),a("tbody",t._l(t.ambientes,(function(e){return a("tr",[a("td",{staticStyle:{"vertical-align":"middle"},attrs:{width:"100px"}},[a("b",[t._v(t._s(e.idAmbienteTrabalho))])]),t._v(" "),a("td",[t._v(t._s(e.idOrigem))]),t._v(" "),a("td",{staticStyle:{"text-align":"justify"}},[t._v(t._s(e.nomeAmbienteTrabalho))]),t._v(" "),a("td",[t._v(t._s(e.subCodigo))]),t._v(" "),a("td",[t._v(t._s(t.camelize(e.estabelecimento)))]),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{width:"100px"}},[a("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.remover(e)}}},[a("i",{staticClass:"fa fa-trash"})]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button"},on:{click:function(a){return t.preencher(e)}}},[a("i",{staticClass:"fas fa-pencil-alt"})])])])})),0)])])]):t._e(),t._v(" "),a("b-modal",{ref:"myModal",attrs:{size:"xl",centered:"","no-close-on-backdrop":!0,"hide-header-close":!0,"no-close-on-esc":!0,title:"Detalhes do Ambiente de Trabalho | "+t.nome,"ok-title":"Salvar","cancel-title":"Cancelar",id:"modal1"},on:{ok:t.ok,cancel:function(e){return t.fechar()}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",class:{"has-error":t.erro}},[a("label",{attrs:{for:""}},[t._v("ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.codigo,expression:"codigo"}],staticClass:"form-control",attrs:{type:"text",disabled:"",name:"ambiente"},domProps:{value:t.codigo},on:{input:function(e){e.target.composing||(t.codigo=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group",class:{"has-error":t.erro}},[a("label",{attrs:{for:""}},[t._v("ID de Origem")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.origem,expression:"origem"}],staticClass:"form-control",attrs:{type:"text",name:"ambiente"},domProps:{value:t.origem},on:{input:function(e){e.target.composing||(t.origem=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("ID secundário")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.subcodigo,expression:"subcodigo"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.subcodigo},on:{input:function(e){e.target.composing||(t.subcodigo=e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Tipo")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.estabelecimento,expression:"estabelecimento"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.estabelecimento=e.target.multiple?a:a[0]}}},[a("option",{attrs:{value:"PRÓPRIO"}},[t._v("1 - Próprio")]),t._v(" "),a("option",{attrs:{value:"TERCEIROS"}},[t._v("2 - Terceiros")])])])]),t._v(" "),"TERCEIROS"==t.estabelecimento?a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("CNPJ Terceiro")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.terceiro,expression:"terceiro"},{name:"mask",rawName:"v-mask",value:"##.###.###/####-##",expression:"'##.###.###/####-##'"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.terceiro},on:{input:function(e){e.target.composing||(t.terceiro=e.target.value)}}})])]):t._e(),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group",class:{"has-error":t.erro}},[a("label",{attrs:{for:""}},[t._v("Nome do Ambiente")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.nome,expression:"nome"}],staticClass:"form-control",attrs:{type:"text",name:"ambiente"},domProps:{value:t.nome},on:{input:function(e){e.target.composing||(t.nome=e.target.value)}}})])])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Observacao")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.observacao,expression:"observacao"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.observacao},on:{input:function(e){e.target.composing||(t.observacao=e.target.value)}}})])])])]),t._v(" "),a("b-modal",{ref:"modalCerteza",attrs:{size:"sm","no-close-on-backdrop":!0,centered:"","hide-header":!0,"hide-footer":!0,"no-close-on-esc":!0,id:"modalCerteza"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("h3",[t._v("Tem certeza que deseja excluir este Ambiente de Trabalho?")])])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"col-md-6 text-center"},[a("button",{staticClass:"btn btn-block btn-secondary btn-lg",attrs:{type:"button"},on:{click:t.fecharCerteza}},[a("i",{staticClass:"fa fa-close"}),t._v(" Não")])]),t._v(" "),a("div",{staticClass:"col-md-6 text-center"},[a("button",{staticClass:"btn btn-block btn-danger btn-lg",attrs:{type:"button"},on:{click:t.certeza}},[a("i",{staticClass:"fa fa-check"}),t._v(" Sim")])])])])],1)}),[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("\n                            ID\n                        ")]),t._v(" "),a("th",[t._v("ID Origem")]),t._v(" "),a("th",[t._v("\n                            Descrição\n                        ")]),t._v(" "),a("th",[t._v("ID Secundário")]),t._v(" "),a("th",[t._v("Estabelecimento")]),t._v(" "),a("th",{staticClass:"text-center no-sort"},[t._v("Ações")])])])}],!1,null,null,null);e.default=i.exports}}]);