(window.webpackJsonp=window.webpackJsonp||[]).push([[91],{0:function(e,t,o){"use strict";function s(e,t,o,s,a,n,i,r){var c,l="function"==typeof e?e.options:e;if(t&&(l.render=t,l.staticRenderFns=o,l._compiled=!0),s&&(l.functional=!0),n&&(l._scopeId="data-v-"+n),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),a&&a.call(this,e),e&&e._registeredComponents&&e._registeredComponents.add(i)},l._ssrRegister=c):a&&(c=r?function(){a.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:a),c)if(l.functional){l._injectStyles=c;var d=l.render;l.render=function(e,t){return c.call(t),d(e,t)}}else{var p=l.beforeCreate;l.beforeCreate=p?[].concat(p,c):[c]}return{exports:e,options:l}}o.d(t,"a",(function(){return s}))},83:function(e,t,o){"use strict";o.r(t);var s={props:["pcmso"],data:function(){return{medico:{pessoa:{}},representanteSelecionado:{},medicosBase:[],nomeRepresentante:"",cpfRepresentante:"",cargoRepresentante:"",funcionarios:[],responsavel:"",complemento:"",historicos:[],edicao:{}}},methods:{tipoPcmso:function(e){return"EMISSÃO"==e?"Emissão":"REVISÃO_PARCIAL"==e?"Revisão Parcial":"REVISÃO_GERAL"==e?"Revisão Geral":void 0},modalResponsavel:function(e){this.edicao=e,this.$refs.modalResponsavel.show()},modalComplemento:function(e){this.edicao=e,this.$refs.modalComplemento.show()},salvarResponsavel:function(){var e=this;axios.post("/pcmso/"+this.pcmso.idPcmso+"/revisao-historico",{medico:e.edicao.empresaProfissional,representante:e.edicao.empresaFuncionario,nome:e.edicao.representante,cpf:e.edicao.cpf,cargo:e.edicao.cargo,complemento:e.edicao.complemento,responsavel:e.edicao.responsavel,idPcmsoHistoricoRevisao:e.edicao.idPcmsoHistoricoRevisao}).then((function(t){e.historicos=t.data,e.edicao={}}))},fechar:function(){},modalMedicos:function(){var e=this;axios.post("/pcmso/medicos",{data:e.pcmso.dataHora}).then((function(t){e.medicosBase=t.data,e.$refs.modalMedicos.show(),console.log(t.data)}))},selecionarMedico:function(e){this.medico=e,this.$refs.modalMedicos.hide()},modalPessoas:function(){var e=this;axios.get("/empresas/funcionarios/"+e.pcmso.empresasContrato[0].empresa.idEmpresa).then((function(t){e.funcionarios=t.data,console.log(t.data),e.$refs.modalPessoas.show()}))},selecionaPessoa:function(e){this.representanteSelecionado=e,this.nomeRepresentante=this.representanteSelecionado.pessoa.nomePessoa,this.cpfRepresentante=this.representanteSelecionado.pessoa.cpf,this.cargoRepresentante=this.representanteSelecionado.funcao.cargo,this.$refs.modalPessoas.hide()},limparPessoa:function(){this.representanteSelecionado={}},salvar:function(){var e=this;if(this.historicos.length>0)var t=this.historicos[0].idPcmsoHistoricoRevisao;else t=0;axios.post("/pcmso/"+this.pcmso.idPcmso+"/revisao-historico",{medico:e.medico,representante:e.representanteSelecionado,nome:e.nomeRepresentante,cpf:e.cpfRepresentante,cargo:e.cargoRepresentante,complemento:e.complemento,responsavel:e.responsavel,idPcmsoHistoricoRevisao:t}).then((function(t){e.historicos=t.data,e.medico={pessoa:{}},e.representanteSelecionado="",e.nomeRepresentante="",e.cpfRepresentante="",e.cargoRepresentante="",e.complemento="",e.responsavel=""}))}},mounted:function(){var e=this;axios.get("/pcmso/"+this.pcmso.idPcmso+"/revisao-historico").then((function(t){console.log(t.data),e.historicos=t.data,e.historicos.length>0&&(e.medico=e.historicos[0].empresaProfissional,e.nomeRepresentante=e.historicos[0].representante,e.representanteSelecionado=e.historicos[0].empresaFuncionario,e.cargoRepresentante=e.historicos[0].cargo,e.cpfRepresentante=e.historicos[0].cpf)}))}},a=o(0),n=Object(a.a)(s,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-5"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[e._v("Médico Responsável do PCMSO")]),e._v(" "),o("div",{staticClass:"input-group mb-3"},[o("input",{directives:[{name:"model",rawName:"v-model",value:"Dr. "+e.medico.pessoa.nomePessoa,expression:"'Dr. ' + medico.pessoa.nomePessoa"}],staticClass:"form-control",attrs:{type:"text",readonly:"",placeholder:"Clique no botão"},domProps:{value:"Dr. "+e.medico.pessoa.nomePessoa},on:{input:function(t){t.target.composing||e.$set("Dr. "+e.medico.pessoa,"nomePessoa",t.target.value)}}}),e._v(" "),o("div",{staticClass:"input-group-append"},[o("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:e.modalMedicos}},[o("i",{staticClass:"fa fa-search"})])])])])]),e._v(" "),e._m(0),e._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[e._v("Representante da Empresa")]),e._v(" "),o("div",{staticClass:"input-group mb-3"},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.nomeRepresentante,expression:"nomeRepresentante"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Pessoa"},domProps:{value:e.nomeRepresentante},on:{keydown:e.limparPessoa,input:function(t){t.target.composing||(e.nomeRepresentante=t.target.value)}}}),e._v(" "),o("div",{staticClass:"input-group-append"},[o("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:e.modalPessoas}},[o("i",{staticClass:"fa fa-search"})])])])])]),e._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[e._v("CPF")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.cpfRepresentante,expression:"cpfRepresentante"},{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.cpfRepresentante},on:{keydown:e.limparPessoa,input:function(t){t.target.composing||(e.cpfRepresentante=t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[e._v("Cargo")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.cargoRepresentante,expression:"cargoRepresentante"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.cargoRepresentante},on:{keydown:e.limparPessoa,input:function(t){t.target.composing||(e.cargoRepresentante=t.target.value)}}})])]),e._v(" "),o("div",{staticClass:"col-md-12"},[o("button",{staticClass:"btn btn-success",on:{click:e.salvar}},[o("i",{staticClass:"fa fa-check"}),e._v(" Salvar")])])]),e._v(" "),o("hr"),e._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("table",{staticClass:"table"},[o("tbody",[e._m(1),e._v(" "),e._l(e.historicos,(function(t){return o("tr",[o("td",[e._v(e._s(e.pcmso.versao))]),e._v(" "),o("td",[e._v(e._s(e._f("moment")(e.pcmso.dataHora,"DD/MM/YYYY")))]),e._v(" "),o("td",[o("strong",[e._v("Dr.")]),e._v(" "+e._s(t.empresaProfissional.pessoa.nomePessoa)+",  "+e._s(t.responsavel)+" "),o("button",{staticClass:"btn btn-sm btn-link",on:{click:function(o){return e.modalResponsavel(t)}}},[e._v("Alterar")])]),e._v(" "),o("td",[o("strong",[e._v(e._s(e.tipoPcmso(e.pcmso.tipoPcmso)))]),e._v(",  "+e._s(t.complemento)+" "),o("button",{staticClass:"btn btn-sm btn-link",on:{click:function(o){return e.modalComplemento(t)}}},[e._v("Alterar")])])])}))],2)])])]),e._v(" "),o("b-modal",{ref:"modalMedicos",attrs:{size:"lg",centered:"","hide-footer":!0,title:"Médicos",id:"modal1"}},[o("table",{staticClass:"table-striped table-hover table"},[e.medicosBase.length>0?o("tbody",[o("tr",[o("th",[e._v("Conselho")]),e._v(" "),o("th",[e._v("Nome")])]),e._v(" "),e._l(e.medicosBase,(function(t){return o("tr",{staticStyle:{cursor:"pointer"},on:{click:function(o){return e.selecionarMedico(t)}}},[o("td",[e._v(e._s(t.numeroRegistro))]),e._v(" "),o("td",[e._v(e._s(t.pessoa.nomePessoa))])])}))],2):e._e()])]),e._v(" "),o("b-modal",{ref:"modalPessoas",attrs:{size:"lg",centered:"","hide-footer":!0,title:"Pessoas",id:"modal1"}},[o("table",{staticClass:"table-striped table-hover table"},[o("tbody",[o("tr",[o("th",[e._v("Nome")]),e._v(" "),o("th",[e._v("CPF")]),e._v(" "),o("th",[e._v("Cargo")])]),e._v(" "),e._l(e.funcionarios,(function(t){return o("tr",{staticStyle:{cursor:"pointer"},on:{click:function(o){return e.selecionaPessoa(t)}}},[o("td",[e._v(e._s(t.pessoa.nomePessoa))]),e._v(" "),o("td",[e._v(e._s(t.pessoa.cpf))]),e._v(" "),o("td",[e._v(e._s(t.funcao.cargo))])])}))],2)])]),e._v(" "),o("b-modal",{ref:"modalResponsavel",attrs:{size:"xs",centered:"","no-close-on-backdrop":!0,"hide-header-close":!0,"no-close-on-esc":!0,title:"Alterar Elaboradores","ok-title":"Salvar","cancel-title":"Cancelar",id:"modal1"},on:{ok:e.salvarResponsavel,cancel:function(t){return e.fechar()}}},[o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[e._v("Elaborador(es)")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.edicao.responsavel,expression:"edicao.responsavel"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.edicao.responsavel},on:{input:function(t){t.target.composing||e.$set(e.edicao,"responsavel",t.target.value)}}})])])]),e._v(" "),o("b-modal",{ref:"modalComplemento",attrs:{size:"xs",centered:"","no-close-on-backdrop":!0,"hide-header-close":!0,"no-close-on-esc":!0,title:"Alterar Complemento","ok-title":"Salvar","cancel-title":"Cancelar",id:"modal2"},on:{ok:e.salvarResponsavel,cancel:function(t){return e.fechar()}}},[o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[e._v("Complemento")]),e._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:e.edicao.complemento,expression:"edicao.complemento"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:e.edicao.complemento},on:{input:function(t){t.target.composing||e.$set(e.edicao,"complemento",t.target.value)}}})])])])],1)}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"col-md-7"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[this._v("Representante dos Trabalhadores")]),this._v(" "),t("input",{staticClass:"form-control",attrs:{type:"text"}})])])},function(){var e=this.$createElement,t=this._self._c||e;return t("tr",[t("th",[this._v("Versão PCMSO")]),this._v(" "),t("th",[this._v("Data PCMSO")]),this._v(" "),t("th",[this._v("Elaborador(es)")]),this._v(" "),t("th",[this._v("Complemento")])])}],!1,null,null,null);t.default=n.exports}}]);