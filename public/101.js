(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{0:function(t,a,e){"use strict";function o(t,a,e,o,n,i,s,r){var c,l="function"==typeof t?t.options:t;if(a&&(l.render=a,l.staticRenderFns=e,l._compiled=!0),o&&(l.functional=!0),i&&(l._scopeId="data-v-"+i),s?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),n&&n.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(s)},l._ssrRegister=c):n&&(c=r?function(){n.call(this,(l.functional?this.parent:this).$root.$options.shadowRoot)}:n),c)if(l.functional){l._injectStyles=c;var u=l.render;l.render=function(t,a){return c.call(a),u(t,a)}}else{var m=l.beforeCreate;l.beforeCreate=m?[].concat(m,c):[c]}return{exports:t,options:l}}e.d(a,"a",(function(){return o}))},104:function(t,a,e){"use strict";e.r(a);var o={props:["ppra","ambiente","empresa"],data:function(){return{data:!1,funcoes:[],funcoesAmbiente:[],funcaoAmbiente:{funcao:{cbo:{},idRH:0},idRH:"",cargo:"",descricaoRH:"",cbo:{},idPpraFuncao:0,ppraAmbienteTrabalho:"",totalMasculino:"",totalMenor:"",totalFeminino:"",alterado:"",anexada:"",maquinas:"",equipamentos:"",ferramentas:"",descricaoOcupacional:"",dataInclusao:""},cbos:[],atual:0}},methods:{remover:function(t){var a=this;axios.get("/gro/ambiente/"+this.ambiente.idPpraAmbienteTrabalho+"/destroy-funcao/"+t.idPpraFuncao).then((function(t){a.funcoesAmbiente=t.data}))},funcaoEmFuncao:function(t){for(var a=0;a<this.funcoesAmbiente.length;a++)if(this.funcoesAmbiente[a].idRH===t.idRH)return!0;return!1},verificaData:function(){var t=new Date(this.funcaoAmbiente.dataInclusao),a=new Date(this.ppra.dataHora);t<a&&(a.setDate(a.getDate()+1),this.$alert("Data precisa ser maior que "+a.getDate()+"/"+(a.getMonth()+1)+"/"+a.getFullYear()),this.funcaoAmbiente.dataInclusao=this.ppra.dataHora)},totalPessoas:function(){this.funcaoAmbiente.total=parseInt(this.funcaoAmbiente.totalMasculino)+parseInt(this.funcaoAmbiente.totalFeminino)},editar:function(t){var a=t,e=this;this.atual=t.idRH,"SIM"==a.anexada?this.data=!1:this.data=!0,axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/funcoes/buscaPorIdRH/"+t.idRH).then((function(t){a.funcao=t.data,e.funcaoAmbiente=a,e.totalPessoas(),e.$refs.modalCargo.show(),e.funcaoAmbiente.total=parseInt(e.funcaoAmbiente.totalMasculino)+parseInt(e.funcaoAmbiente.totalFeminino)}))},abrirDescricaoRH:function(){this.funcaoAmbiente.funcao.idRH&&this.$refs.modalRH.show()},abrirDescricaoCBO:function(){this.funcaoAmbiente.funcao.cbo&&this.$refs.modalCBO.show()},incluir:function(){this.data=!0,this.funcaoAmbiente={idRH:"",cargo:"",descricaoRH:"",cbo:{},idPpraFuncao:0,ppraAmbienteTrabalho:"",totalMasculino:0,totalMenor:0,totalFeminino:0,alterado:"S",anexada:"NÃO",maquinas:"",equipamentos:"",ferramentas:"",descricaoOcupacional:"",dataInclusao:this.ppra.dataHora,funcao:{cbo:{},idRH:0},total:0},this.$refs.modalCargo.show()},abrir:function(){this.data=!1,this.funcaoAmbiente={idRH:"",cargo:"",descricaoRH:"",cbo:{},idPpraFuncao:0,ppraAmbienteTrabalho:"",totalMasculino:0,totalMenor:0,totalFeminino:0,alterado:"S",anexada:"SIM",maquinas:"",equipamentos:"",ferramentas:"",descricaoOcupacional:"",dataInclusao:"",funcao:{cbo:{},idRH:0},total:0},this.$refs.modalCargo.show()},salvar:function(){var t=this;this.funcaoAmbiente.ppraAmbienteTrabalho=this.ambiente.idPpraAmbienteTrabalho,this.funcaoAmbiente.alterado="S",axios.post("/gro/ambiente/"+this.ambiente.idPpraAmbienteTrabalho+"/funcoes",{funcao:t.funcaoAmbiente}).then((function(a){t.funcoesAmbiente=a.data}))}},mounted:function(){var t=this;axios.get("/gro/ambiente/"+this.ambiente.idPpraAmbienteTrabalho+"/funcoes").then((function(a){t.funcoesAmbiente=a.data})),axios.get("/tabelas/cbo/list").then((function(a){t.cbos=a.data})),axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/funcoes").then((function(a){t.funcoes=a.data}))}},n=e(0),i=Object(n.a)(o,(function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("h5",{staticClass:"title-table"},[t._v("\n            Lista de Cargos do Ambiente "+t._s(t.ambiente.nomeAmbienteTrabalho)+"\n        ")]),t._v(" "),e("table",{staticClass:"table table-hover table-striped"},[e("tbody",[t._m(0),t._v(" "),t._l(t.funcoesAmbiente,(function(a){return e("tr",{staticStyle:{cursor:"pointer"}},[e("td",[t._v(t._s(a.idPpraFuncao))]),t._v(" "),e("td",[t._v(t._s(a.idRH))]),t._v(" "),e("td",[t._v(t._s(a.cargo))]),t._v(" "),e("td",[t._v(t._s(a.cbo.codigoCbo))]),t._v(" "),e("td",[t._v(t._s(a.totalMasculino))]),t._v(" "),e("td",[t._v(t._s(a.totalFeminino))]),t._v(" "),e("td"),t._v(" "),e("td",[t._v(t._s(a.totalMenor))]),t._v(" "),e("td",[t._v(t._s(parseInt(a.totalMasculino)+parseInt(a.totalFeminino)))]),t._v(" "),e("td",[t._v("\n                        "+t._s(t._f("moment")(a.dataInclusao,"DD/MM/Y"))+"\n                        "),"SIM"==a.anexada?e("span",[t._v("\n                            - "),e("strong",[t._v("A")])]):t._e(),t._v(" "),"SIM"!=a.anexada?e("span",[t._v("\n                            - "),e("strong",[t._v("I")])]):t._e()]),t._v(" "),e("td",[e("button",{staticClass:"btn btn-primary btn-sm",on:{click:function(e){return t.editar(a)}}},[e("i",{staticClass:"fas fa-pencil-alt"})]),t._v(" "),e("button",{staticClass:"btn btn-danger btn-sm",on:{click:function(e){return t.remover(a)}}},[e("i",{staticClass:"fas fa-trash"})])])])})),t._v(" "),e("tr",[t._m(1),t._v(" "),e("td"),t._v(" "),e("td",[e("strong",[t._v("\n                            "+t._s(t.funcoesAmbiente.length)+"\n                        ")])]),t._v(" "),e("td"),t._v(" "),e("td",[e("strong",[t._v("\n                            "+t._s(t.funcoesAmbiente.reduce((function(t,a){return t+a.totalMasculino}),0))+"\n                        ")])]),t._v(" "),e("td",[e("strong",[t._v("\n                            "+t._s(t.funcoesAmbiente.reduce((function(t,a){return t+a.totalFeminino}),0))+"\n                        ")])]),t._v(" "),e("td"),t._v(" "),e("td",[e("strong",[t._v("\n                            "+t._s(t.funcoesAmbiente.reduce((function(t,a){return t+a.totalMenor}),0))+"\n                        ")])]),t._v(" "),e("td",[e("strong",[t._v("\n                            "+t._s(t.funcoesAmbiente.reduce((function(t,a){return t+a.totalMasculino}),0)+t.funcoesAmbiente.reduce((function(t,a){return t+a.totalFeminino}),0))+"\n                        ")])]),t._v(" "),e("td"),t._v(" "),e("td")])],2)])]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("button",{staticClass:"btn btn-primary",on:{click:t.abrir}},[t._v("Anexar Função")]),t._v(" "),e("button",{staticClass:"btn btn-primary",on:{click:t.incluir}},[t._v("Incluir Função")])]),t._v(" "),e("b-modal",{ref:"modalCargo",attrs:{size:"xl",centered:"","no-close-on-backdrop":!0,"hide-header-close":!0,"no-close-on-esc":!0,title:"Detalhes do Cargo","ok-title":"Salvar","cancel-title":"Cancelar",id:"modal1"},on:{ok:t.salvar}},[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("ID")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.idPpraFuncao,expression:"funcaoAmbiente.idPpraFuncao"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.funcaoAmbiente.idPpraFuncao},on:{input:function(a){a.target.composing||t.$set(t.funcaoAmbiente,"idPpraFuncao",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Cargo")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.funcao,expression:"funcaoAmbiente.funcao"}],staticClass:"form-control",on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.funcaoAmbiente,"funcao",a.target.multiple?e:e[0])}}},t._l(t.funcoes,(function(a){return!t.funcaoEmFuncao(a)&&a.idRH!=t.funcaoAmbiente.idRH||a.idRH==t.atual?e("option",{domProps:{value:a}},[t._v(t._s(a.cargo))]):t._e()})),0)])]),t._v(" "),e("div",{staticClass:"col-md-1"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Id RH")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.funcao.idRH,expression:"funcaoAmbiente.funcao.idRH"}],staticClass:"form-control",attrs:{type:"number",disabled:""},domProps:{value:t.funcaoAmbiente.funcao.idRH},on:{input:function(a){a.target.composing||t.$set(t.funcaoAmbiente.funcao,"idRH",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group",on:{click:t.abrirDescricaoRH}},[e("label",{attrs:{for:""}},[t._v("Descrição RH")]),t._v(" "),t.funcaoAmbiente.funcao.idRH?e("input",{staticClass:"form-control",attrs:{type:"text",disabled:"",value:"Ver Descrição"},on:{click:t.abrirDescricaoRH}}):t._e(),t._v(" "),t.funcaoAmbiente.funcao.idRH?t._e():e("input",{staticClass:"form-control",attrs:{type:"text",disabled:""}})])]),t._v(" "),e("div",{staticClass:"col-md-3"},[e("div",{staticClass:"form-group",on:{click:t.abrirDescricaoCBO}},[e("label",{attrs:{for:""}},[t._v("CBO")]),t._v(" "),t.funcaoAmbiente.funcao.cbo.idCbo?e("input",{staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.funcaoAmbiente.funcao.cbo.codigoCbo+"- Ver Descrição"},on:{click:t.abrirDescricaoCBO}}):t._e(),t._v(" "),t.funcaoAmbiente.funcao.cbo.idCbo?t._e():e("input",{staticClass:"form-control",attrs:{type:"text",disabled:""}})])]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Data Inclusão")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.dataInclusao,expression:"funcaoAmbiente.dataInclusao"}],staticClass:"form-control",attrs:{min:t.ppra.dataHora,disabled:t.data,type:"date"},domProps:{value:t.funcaoAmbiente.dataInclusao},on:{blur:t.verificaData,input:function(a){a.target.composing||t.$set(t.funcaoAmbiente,"dataInclusao",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Total Masculino")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.totalMasculino,expression:"funcaoAmbiente.totalMasculino"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.funcaoAmbiente.totalMasculino},on:{change:t.totalPessoas,input:function(a){a.target.composing||t.$set(t.funcaoAmbiente,"totalMasculino",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Total Feminino")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.totalFeminino,expression:"funcaoAmbiente.totalFeminino"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.funcaoAmbiente.totalFeminino},on:{change:t.totalPessoas,input:function(a){a.target.composing||t.$set(t.funcaoAmbiente,"totalFeminino",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Total Menor")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.totalMenor,expression:"funcaoAmbiente.totalMenor"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.funcaoAmbiente.totalMenor},on:{input:function(a){a.target.composing||t.$set(t.funcaoAmbiente,"totalMenor",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Total PCD")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.totalPCD,expression:"funcaoAmbiente.totalPCD"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:t.funcaoAmbiente.totalPCD},on:{input:function(a){a.target.composing||t.$set(t.funcaoAmbiente,"totalPCD",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-2"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Total Empregados")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.total,expression:"funcaoAmbiente.total"}],staticClass:"form-control",attrs:{type:"number",disabled:""},domProps:{value:t.funcaoAmbiente.total},on:{input:function(a){a.target.composing||t.$set(t.funcaoAmbiente,"total",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Descrição Ocupacional")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.descricaoOcupacional,expression:"funcaoAmbiente.descricaoOcupacional"}],staticClass:"form-control",attrs:{rows:"5"},domProps:{value:t.funcaoAmbiente.descricaoOcupacional},on:{input:function(a){a.target.composing||t.$set(t.funcaoAmbiente,"descricaoOcupacional",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Máquinas")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.maquinas,expression:"funcaoAmbiente.maquinas"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.funcaoAmbiente.maquinas},on:{input:function(a){a.target.composing||t.$set(t.funcaoAmbiente,"maquinas",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Ferramentas")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.ferramentas,expression:"funcaoAmbiente.ferramentas"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.funcaoAmbiente.ferramentas},on:{input:function(a){a.target.composing||t.$set(t.funcaoAmbiente,"ferramentas",a.target.value)}}})])]),t._v(" "),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Equipamentos")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.equipamentos,expression:"funcaoAmbiente.equipamentos"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.funcaoAmbiente.equipamentos},on:{input:function(a){a.target.composing||t.$set(t.funcaoAmbiente,"equipamentos",a.target.value)}}})])])])]),t._v(" "),e("b-modal",{ref:"modalRH",attrs:{size:"md",centered:"",title:"Detalhes","cancel-title":"Cancelar"}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Descrição de RH")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.funcao.descricaoRH,expression:"funcaoAmbiente.funcao.descricaoRH"}],staticClass:"form-control",attrs:{disabled:""},domProps:{value:t.funcaoAmbiente.funcao.descricaoRH},on:{input:function(a){a.target.composing||t.$set(t.funcaoAmbiente.funcao,"descricaoRH",a.target.value)}}})])]),t._v(" "),e("b-modal",{ref:"modalCBO",attrs:{size:"md",centered:"",title:"Detalhes","cancel-title":"Cancelar"}},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[t._v("Descrição do CBO")]),t._v(" "),e("textarea",{directives:[{name:"model",rawName:"v-model",value:t.funcaoAmbiente.funcao.cbo.descricao,expression:"funcaoAmbiente.funcao.cbo.descricao"}],staticClass:"form-control",attrs:{disabled:"",rows:"5"},domProps:{value:t.funcaoAmbiente.funcao.cbo.descricao},on:{input:function(a){a.target.composing||t.$set(t.funcaoAmbiente.funcao.cbo,"descricao",a.target.value)}}})])])],1)}),[function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("tr",[e("th",[t._v("ID")]),t._v(" "),e("th",[t._v("ID RH")]),t._v(" "),e("th",[t._v("Cargo")]),t._v(" "),e("th",[t._v("CBO")]),t._v(" "),e("th",[t._v("M")]),t._v(" "),e("th",[t._v("F")]),t._v(" "),e("th",[t._v("PCD")]),t._v(" "),e("th",[t._v("Menor")]),t._v(" "),e("th",[t._v("Todos")]),t._v(" "),e("th",[t._v("Dt da Inclusão")]),t._v(" "),e("th",[t._v("Ações")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("td",[a("strong",[this._v("Totais")])])}],!1,null,"51f8eb5d",null);a.default=i.exports}}]);