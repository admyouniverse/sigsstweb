(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{108:function(t,e,a){"use strict";a.r(e);var n={props:["posto","empresa"],components:{Money:a(165).Money},data:function(){return{itens:[],gradeEmpresaEpis:[],calcula:0,entradas:[],fornecedores:[],money:{decimal:",",thousands:".",prefix:"R$ ",suffix:"",precision:2,masked:!1},entrada:{tipo:"ENTRADA",idEntradaEpi:0,data:"",descricao:""},entradaitens:[],epi:{},selecionados:[],carregando:!1,mensagem:"Carregando...",html:'<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>'}},methods:{carregar:function(t){this.mensagem=t,this.html='<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>',this.carregando=!0},sucesso:function(t){this.mensagem=t,this.html='<i class="fa fa-check-circle fa-2x fa-fw"></i>';var e=this;setTimeout((function(){e.carregando=!1}),800)},removerItem:function(t){this.entradaitens.splice(t,1)},adicionarItem:function(t){t.preventDefault();var e=this;axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/estoques/listaPorIdPostoEntrega/"+e.posto.idPostoEntrega).then((function(t){var a=t.data;e.selecionados.forEach((function(t){console.log(t);var n=a.findIndex((function(e){return e.gradeEmpresaEpi.idGradeEmpresaEpi==t.idGradeEmpresaEpi}));if(console.log(n),n>0)var i=a[n];else i={idEstoque:0,gradeEmpresaEpi:t,postoEntrega:e.posto,quantidadeEstoque:0,quantidadeMinima:0,valorUnitario:0,usuario:1};e.entradaitens.push({idEntradaEpiItens:0,valorUnitario:0,entradaEpi:e.entradaEpi,estoque:i,quantidade:0,observacao:""})})),e.$refs.itensModal.hide(),e.selecionados=[]}))},abrir:function(){this.entrada={tipo:"ENTRADA",idEntradaEpi:0,data:"",descricao:""},this.entradaitens=[],this.$refs.myModal.show()},selecionar:function(t){if(this.estaSelecionado(t)){var e=this.selecionados.findIndex((function(e){return e.idGradeEmpresaEpi==t.idGradeEmpresaEpi}));this.selecionados.splice(e,1)}else this.selecionados.push(t)},estaSelecionado:function(t){return this.selecionados.includes(t)},estaAdicionado:function(t){return!(this.entradaitens.findIndex((function(e){return e.estoque.gradeEmpresaEpi.idGradeEmpresaEpi==t.idGradeEmpresaEpi}))<0)},listaItens:function(){var t=this;axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/grade-empresa-epis/listaPorIdEmpresa/"+this.empresa.idEmpresa).then((function(e){t.gradeEmpresaEpis=e.data,$("#tabelaItens").DataTable().destroy(),t.$refs.itensModal.show()}))},exibeTabela:function(){$("#tabelaItens").DataTable({lengthMenu:[[50,-1],[50,"Todos"]],columnDefs:[{targets:"no-sort",orderable:!1}],language:{url:"//cdn.datatables.net/plug-ins/1.10.20/i18n/Portuguese-Brasil.json"}})},salvar:function(t){t.preventDefault();var e=this;this.carregar("Salvando entrada..."),axios.post("/posto-entrega/"+this.posto.idPostoEntrega+"/item/multiplos",{entrada:e.entrada,itens:e.entradaitens}).then((function(t){axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/entrada-epis/listaPorIdPostoEntrega/"+e.posto.idPostoEntrega).then((function(t){$("#tabelaEntradas").DataTable().destroy(),e.entradas=t.data,e.$nextTick((function(){e.ativaOrdem()})),e.$refs.myModal.hide(),e.sucesso("Entrada salva com sucesso!")}))}))},editar:function(t){this.entrada=t;var e=this;axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/entrada-epi-itens/listaPorIdEntradaEpi/"+this.entrada.idEntradaEpi).then((function(t){e.entradaitens=t.data,e.$refs.myModal.show()}))},atualizarEstoque:function(t){var e=this;axios.get("/posto-entrega/"+this.posto.idPostoEntrega+"/entrada/"+t.idEntradaEpi+"/estoque").then((function(t){axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/entrada-epis/listaPorIdPostoEntrega/"+e.posto.idPostoEntrega).then((function(t){e.entradas=t.data,e.$nextTick((function(){e.ativaOrdem()}))})),e.$refs.myModal.hide()}))},remover:function(t){},ativaOrdem:function(){$("#tabelaEntradas").DataTable().destroy(),$.fn.dataTable.moment("DD/MM/YYYY"),$("#tabelaEntradas").DataTable({order:[[1,"desc"]],lengthMenu:[[50,-1],[50,"Todos"]],columnDefs:[{targets:"no-sort",orderable:!1}],language:{url:"//cdn.datatables.net/plug-ins/1.10.20/i18n/Portuguese-Brasil.json"}})}},mounted:function(){var t=this;axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/entrada-epis/listaPorIdPostoEntrega/"+this.posto.idPostoEntrega).then((function(e){t.entradas=e.data})),axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/fornecedores/").then((function(e){t.fornecedores=e.data}))}},i=(a(362),a(164)),s=Object(i.a)(n,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-tab",{attrs:{title:"Entrada de EPI"},on:{click:t.ativaOrdem}},[t.carregando?a("BlockUI",{attrs:{message:t.mensagem,html:t.html}}):t._e(),t._v(" "),a("b-card-text",[t.entradas.length>0?a("table",{staticClass:"table table-hover table-striped",attrs:{id:"tabelaEntradas"}},[a("thead",[a("tr",[a("th",[t._v("ID")]),t._v(" "),a("th",[t._v("Data")]),t._v(" "),a("th",[t._v("Fornecedor")]),t._v(" "),a("th",[t._v("CNPJ")]),t._v(" "),a("th",[t._v("Nota Fiscal")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Ef. ao Estoque")]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.entradas,(function(e){return a("tr",{class:{"bg-primary":"SIM"!=e.estoqueAtualizado}},[a("td",[t._v(t._s(e.idEntradaEpi)+" ")]),t._v(" "),a("td",[t._v(t._s(t._f("moment")(e.data,"DD/MM/YYYY")))]),t._v(" "),a("td",[t._v(t._s(e.fornecedor.nomeFantasia))]),t._v(" "),a("td",[t._v(t._s(e.fornecedor.cnpj))]),t._v(" "),a("td",[t._v(t._s(e.numeroNotaFiscal))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.estoqueAtualizado))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(a){return t.editar(e)}}},["NAO"==e.estoqueAtualizado?a("i",{staticClass:"fas fa-pencil-alt"}):t._e(),t._v(" "),"SIM"==e.estoqueAtualizado?a("i",{staticClass:"far fa-eye"}):t._e()]),t._v(" "),"SIM"!=e.estoqueAtualizado?a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(a){return t.remover(e)}}},[a("i",{staticClass:"fas fa-trash-alt"})]):t._e(),t._v(" "),"SIM"!=e.estoqueAtualizado?a("button",{staticClass:"btn btn-sm btn-outline-secondary",on:{click:function(a){return t.atualizarEstoque(e)}}},[a("i",{staticClass:"fas fa-check"})]):t._e()])])})),0)]):t._e(),t._v(" "),a("div",{staticClass:"col-md-12 text-center"},[a("br"),t._v(" "),a("button",{staticClass:"btn btn-success",on:{click:function(e){return t.abrir()}}},[a("i",{staticClass:"fa fa-plus"}),t._v("\n               Adicionar")])]),t._v(" "),a("b-modal",{ref:"myModal",attrs:{title:"Entrada de Item","ok-title":"Salvar","cancel-title":"Cancelar",size:"xl","hide-footer":"SIM"==t.entrada.estoqueAtualizado},on:{ok:t.salvar}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("label",[t._v("ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrada.idEntradaEpi,expression:"entrada.idEntradaEpi"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entrada.idEntradaEpi},on:{input:function(e){e.target.composing||t.$set(t.entrada,"idEntradaEpi",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("label",[t._v("Número da Nota")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrada.numeroNotaFiscal,expression:"entrada.numeroNotaFiscal"}],staticClass:"form-control",attrs:{type:"text",disabled:"SIM"==t.entrada.estoqueAtualizado},domProps:{value:t.entrada.numeroNotaFiscal},on:{input:function(e){e.target.composing||t.$set(t.entrada,"numeroNotaFiscal",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("label",[t._v("Data")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrada.data,expression:"entrada.data"}],staticClass:"form-control",attrs:{type:"date",disabled:"SIM"==t.entrada.estoqueAtualizado},domProps:{value:t.entrada.data},on:{input:function(e){e.target.composing||t.$set(t.entrada,"data",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("label",[t._v("Fornecedor")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.entrada.fornecedor,expression:"entrada.fornecedor"}],staticClass:"form-control",attrs:{disabled:"SIM"==t.entrada.estoqueAtualizado},on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.entrada,"fornecedor",e.target.multiple?a:a[0])}}},t._l(t.fornecedores,(function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e.razaoSocial))])})),0)])]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-12"},[a("h5",[t._v("Itens")]),t._v(" "),a("hr"),t._v(" "),a("table",{staticClass:"table table-hover table-striped"},[a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("ID")]),t._v(" "),a("th",[t._v("Descrição")]),t._v(" "),a("th",[t._v("Cor")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Tamanho")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("C.A")]),t._v(" "),a("th",[t._v("Fabricante")]),t._v(" "),a("th",{staticStyle:{width:"105px"}},[t._v("Estoque Min")]),t._v(" "),a("th",{staticStyle:{width:"100px"}},[t._v("Quantidade")]),t._v(" "),a("th",{staticStyle:{width:"150px"}},[t._v("Valor Unitário")]),t._v(" "),a("th")])]),t._v(" "),a("tbody",t._l(t.entradaitens,(function(e,n){return a("tr",{class:{"bg-warning":0==e.estoque.idEstoque}},[a("td",{staticClass:"text-center"},[t._v(t._s(e.estoque.gradeEmpresaEpi.idOrigem))]),t._v(" "),a("td",[t._v(t._s(e.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.epi.descricao))]),t._v(" "),a("td",[t._v(t._s(e.estoque.gradeEmpresaEpi.cor.descricao))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.estoque.gradeEmpresaEpi.tamanho.descricao))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.estoque.gradeEmpresaEpi.cadastroEpiCa.ca))]),t._v(" "),a("td",[t._v(t._s(e.estoque.gradeEmpresaEpi.cadastroEpiCa.fabricante))]),t._v(" "),a("td",{staticClass:"text-center"},[!e.estoque.idEstoque>0?a("input",{directives:[{name:"model",rawName:"v-model",value:e.estoque.quantidadeMinima,expression:"entradaitem.estoque.quantidadeMinima"}],staticClass:"form-control",attrs:{type:"number"},domProps:{value:e.estoque.quantidadeMinima},on:{input:function(a){a.target.composing||t.$set(e.estoque,"quantidadeMinima",a.target.value)}}}):t._e(),t._v(" "),e.estoque.idEstoque>0?a("span",[t._v("\n                                       "+t._s(e.estoque.quantidadeMinima)+"\n                                   ")]):t._e()]),t._v(" "),a("td",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.quantidade,expression:"entradaitem.quantidade"}],staticClass:"form-control",attrs:{type:"number",disabled:"SIM"==t.entrada.estoqueAtualizado},domProps:{value:e.quantidade},on:{input:function(a){a.target.composing||t.$set(e,"quantidade",a.target.value)}}})]),t._v(" "),a("td",[a("money",t._b({staticClass:"form-control",attrs:{disabled:"SIM"==t.entrada.estoqueAtualizado},model:{value:e.valorUnitario,callback:function(a){t.$set(e,"valorUnitario",a)},expression:"entradaitem.valorUnitario"}},"money",t.money,!1))],1),t._v(" "),a("td",["SIM"!=t.entrada.estoqueAtualizado?a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(e){return t.removerItem(n)}}},[a("i",{staticClass:"fas fa-trash"})]):t._e()])])})),0)])]),t._v(" "),"SIM"!=t.entrada.estoqueAtualizado?a("div",{staticClass:"col-md-12"},[a("button",{staticClass:"btn btn-success",on:{click:t.listaItens}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Adicionar")]),t._v(" "),"SIM"!=t.entrada.estoqueAtualizado&&0!=t.entrada.idEntradaEpi?a("button",{staticClass:"btn btn-success pull-right",on:{click:function(e){return t.atualizarEstoque(t.entrada)}}},[t._v("Adicionar ao Estoque")]):t._e()]):t._e()])]),t._v(" "),a("b-modal",{ref:"itensModal",attrs:{title:"Itens no Posto","ok-title":"Incluir","cancel-title":"Cancelar",size:"lg"},on:{shown:t.exibeTabela,ok:t.adicionarItem}},[a("table",{staticClass:"table table-hover table-striped",attrs:{id:"tabelaItens"}},[a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("ID")]),t._v(" "),a("th",[t._v("Descrição")]),t._v(" "),a("th",[t._v("Cor")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Tamanho")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("C.A")]),t._v(" "),a("th",[t._v("Fabricante")])])]),t._v(" "),a("tbody",t._l(t.gradeEmpresaEpis,(function(e){return t.estaAdicionado(e)?t._e():a("tr",{class:{selecionado:t.estaSelecionado(e)},staticStyle:{cursor:"pointer"},on:{click:function(a){return t.selecionar(e)}}},[a("td",{staticClass:"text-center"},[t._v(t._s(e.idOrigem))]),t._v(" "),a("td",[t._v(t._s(e.cadastroEpiCa.cadastroEpi.epi.descricao))]),t._v(" "),a("td",[t._v(t._s(e.cor.descricao))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.tamanho.descricao))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.cadastroEpiCa.ca))]),t._v(" "),a("td",[t._v(t._s(e.cadastroEpiCa.fabricante))])])})),0)])])],1)],1)}),[],!1,null,"6e94ecd6",null);e.default=s.exports},164:function(t,e,a){"use strict";function n(t,e,a,n,i,s,r,o){var d,c="function"==typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=a,c._compiled=!0),n&&(c.functional=!0),s&&(c._scopeId="data-v-"+s),r?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(r)},c._ssrRegister=d):i&&(d=o?function(){i.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:i),d)if(c.functional){c._injectStyles=d;var u=c.render;c.render=function(t,e){return d.call(e),u(t,e)}}else{var l=c.beforeCreate;c.beforeCreate=l?[].concat(l,d):[d]}return{exports:t,options:c}}a.d(e,"a",(function(){return n}))},165:function(t,e,a){t.exports=function(t){function e(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var a={};return e.m=t,e.c=a,e.i=function(t){return t},e.d=function(t,a,n){e.o(t,a)||Object.defineProperty(t,a,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var a=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(a,"a",a),a},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p=".",e(e.s=9)}([function(t,e,a){"use strict";e.a={prefix:"",suffix:"",thousands:",",decimal:".",precision:2}},function(t,e,a){"use strict";var n=a(2),i=a(5),s=a(0);e.a=function(t,e){if(e.value){var r=a.i(i.a)(s.a,e.value);if("INPUT"!==t.tagName.toLocaleUpperCase()){var o=t.getElementsByTagName("input");1!==o.length||(t=o[0])}t.oninput=function(){var e=t.value.length-t.selectionEnd;t.value=a.i(n.a)(t.value,r),e=Math.max(e,r.suffix.length),e=t.value.length-e,e=Math.max(e,r.prefix.length+1),a.i(n.b)(t,e),t.dispatchEvent(a.i(n.c)("change"))},t.onfocus=function(){a.i(n.b)(t,t.value.length-r.suffix.length)},t.oninput(),t.dispatchEvent(a.i(n.c)("input"))}}},function(t,e,a){"use strict";function n(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.a;"number"==typeof t&&(t=t.toFixed(r(e.precision)));var a=t.indexOf("-")>=0?"-":"",n=s(t),i=o(n,e.precision),l=u(i).split("."),f=l[0],v=l[1];return f=d(f,e.thousands),e.prefix+a+c(f,v,e.decimal)+e.suffix}function i(t,e){var a=t.indexOf("-")>=0?-1:1,n=o(s(t),e);return parseFloat(n)*a}function s(t){return u(t).replace(/\D+/g,"")||"0"}function r(t){return function(t,e,a){return Math.max(t,Math.min(e,a))}(0,t,20)}function o(t,e){var a=Math.pow(10,e);return(parseFloat(t)/a).toFixed(r(e))}function d(t,e){return t.replace(/(\d)(?=(?:\d{3})+\b)/gm,"$1"+e)}function c(t,e,a){return e?t+a+e:t}function u(t){return t?t.toString():""}function l(t,e){var a=function(){t.setSelectionRange(e,e)};t===document.activeElement&&(a(),setTimeout(a,1))}function f(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}var p=a(0);a.d(e,"a",(function(){return n})),a.d(e,"d",(function(){return i})),a.d(e,"b",(function(){return l})),a.d(e,"c",(function(){return f}))},function(t,e,a){"use strict";function n(t,e){e&&Object.keys(e).map((function(t){o.a[t]=e[t]})),t.directive("money",r.a),t.component("money",s.a)}Object.defineProperty(e,"__esModule",{value:!0});var i=a(6),s=a.n(i),r=a(1),o=a(0);a.d(e,"Money",(function(){return s.a})),a.d(e,"VMoney",(function(){return r.a})),a.d(e,"options",(function(){return o.a})),a.d(e,"VERSION",(function(){return d}));var d="0.8.1";e.default=n,"undefined"!=typeof window&&window.Vue&&window.Vue.use(n)},function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a(1),i=a(0),s=a(2);e.default={name:"Money",props:{value:{required:!0,type:[Number,String],default:0},masked:{type:Boolean,default:!1},precision:{type:Number,default:function(){return i.a.precision}},decimal:{type:String,default:function(){return i.a.decimal}},thousands:{type:String,default:function(){return i.a.thousands}},prefix:{type:String,default:function(){return i.a.prefix}},suffix:{type:String,default:function(){return i.a.suffix}}},directives:{money:n.a},data:function(){return{formattedValue:""}},watch:{value:{immediate:!0,handler:function(t,e){var n=a.i(s.a)(t,this.$props);n!==this.formattedValue&&(this.formattedValue=n)}}},methods:{change:function(t){this.$emit("input",this.masked?t.target.value:a.i(s.d)(t.target.value,this.precision))}}}},function(t,e,a){"use strict";e.a=function(t,e){return t=t||{},e=e||{},Object.keys(t).concat(Object.keys(e)).reduce((function(a,n){return a[n]=void 0===e[n]?t[n]:e[n],a}),{})}},function(t,e,a){var n=a(7)(a(4),a(8),null,null);t.exports=n.exports},function(t,e){t.exports=function(t,e,a,n){var i,s=t=t||{},r=typeof t.default;"object"!==r&&"function"!==r||(i=t,s=t.default);var o="function"==typeof s?s.options:s;if(e&&(o.render=e.render,o.staticRenderFns=e.staticRenderFns),a&&(o._scopeId=a),n){var d=o.computed||(o.computed={});Object.keys(n).forEach((function(t){var e=n[t];d[t]=function(){return e}}))}return{esModule:i,exports:s,options:o}}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("input",{directives:[{name:"money",rawName:"v-money",value:{precision:t.precision,decimal:t.decimal,thousands:t.thousands,prefix:t.prefix,suffix:t.suffix},expression:"{precision, decimal, thousands, prefix, suffix}"}],staticClass:"v-money",attrs:{type:"tel"},domProps:{value:t.formattedValue},on:{change:t.change}})},staticRenderFns:[]}},function(t,e,a){t.exports=a(3)}])},229:function(t,e,a){var n=a(363);"string"==typeof n&&(n=[[t.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(132)(n,i);n.locals&&(t.exports=n.locals)},362:function(t,e,a){"use strict";a(229)},363:function(t,e,a){(t.exports=a(131)(!1)).push([t.i,".selecionado[data-v-6e94ecd6] {\n  background-color: #71bb66 !important;\n}\n.bg-warning[data-v-6e94ecd6] {\n  background-color: #fde4bc !important;\n}\ntr.bg-primary[data-v-6e94ecd6] {\n  background-color: #c0b5fd !important;\n}",""])}}]);