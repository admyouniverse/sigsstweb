(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{164:function(t,e,a){"use strict";function s(t,e,a,s,i,o,n,r){var c,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=a,d._compiled=!0),s&&(d.functional=!0),o&&(d._scopeId="data-v-"+o),n?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(n)},d._ssrRegister=c):i&&(c=r?function(){i.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:i),c)if(d.functional){d._injectStyles=c;var l=d.render;d.render=function(t,e){return c.call(e),l(t,e)}}else{var u=d.beforeCreate;d.beforeCreate=u?[].concat(u,c):[c]}return{exports:t,options:d}}a.d(e,"a",(function(){return s}))},197:function(t,e,a){var s=a(299);"string"==typeof s&&(s=[[t.i,s,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};a(132)(s,i);s.locals&&(t.exports=s.locals)},298:function(t,e,a){"use strict";a(197)},299:function(t,e,a){(t.exports=a(131)(!1)).push([t.i,"th {\n  font-weight: 400;\n  cursor: pointer;\n}\nth.selecionado {\n  font-weight: 800;\n}",""])},55:function(t,e,a){"use strict";a.r(e);var s={props:["empresa"],data:function(){return{historicos:"",erro:!1,dataFinal:"",editar:!1,carregando:!0,mensagem:"Carregando histórico...",html:'<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>',montou:!1,deletar:"",coluna:"",ordem:!0,termo:"",selecionado:"codigo",idTabela:"#tabelaListagem",tipo:"desativar"}},methods:{carregar:function(t){this.mensagem=t,this.html='<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>',this.carregando=!0},sucesso:function(t){this.mensagem=t,this.html='<i class="fa fa-check-circle fa-2x fa-fw"></i>';var e=this;setTimeout((function(){e.carregando=!1}),800)},alerta:function(t){this.mensagem=t,this.html='<i class="fa fa-close fa-2x fa-fw"></i>';var e=this;setTimeout((function(){e.carregando=!1}),1e3)},desativar:function(){this.tipo="desativar",this.abrir()},ativar:function(){this.tipo="ativar",this.abrir()},salvar:function(){this.carregar("Salvando...");var t=this;this.dataFinal?axios.post("/empresas/historico/",{empresa:t.empresa,dataFinal:t.dataFinal,tipo:t.tipo}).then((function(e){"erro"==e.data?t.alerta("Erro ao salvar!"):(t.historicos=e.data,t.$nextTick((function(){t.fechar(),t.sucesso("Salvo com sucesso!")})))})):t.alerta("Preencha a data final!")},abrir:function(){this.$refs.myModal.show()},ok:function(t){t.preventDefault(),this.editar,this.salvar()},fechar:function(){this.$refs.myModal.hide()},ordenar:function(t){this.coluna==t?this.ordem=!this.ordem:this.ordem=!0,this.coluna=t,"codigo"==t?1==this.ordem?this.eventos.sort((function(t,e){return t.idEvento>e.idEvento?1:t.idEvento<e.idEvento?-1:0})):this.eventos.sort((function(t,e){return t.idEvento>e.idEvento?-1:t.idEvento<e.idEvento?1:0})):"descricao"==t&&(1==this.ordem?this.eventos.sort((function(t,e){return t.descricao>e.descricao?1:t.descricao<e.descricao?-1:0})):this.eventos.sort((function(t,e){return t.descricao>e.descricao?-1:t.descricao<e.descricao?1:0})))},pesquisar:function(){if(""!=this.termo&&" "!=this.termo){this.carregar("Realizando a busca...");var t=this;axios.get("/empresas/eventos/buscar/"+t.selecionado+"/"+t.termo).then((function(e){e.data.length>0?(t.eventos=e.data,t.sucesso("Encontramos "+e.data.length+" resultado(s)."),t.busca=!0):(t.alerta("Nenhum resultado nesta busca"),t.busca=!1)}))}},voltar:function(){var t=this;this.carregar("Recuperando todos os itens..."),axios.get("/empresas/eventos/list").then((function(e){t.eventos=e.data,t.sucesso("Todas os itens recuperados com sucesso!"),t.busca=!1,t.termo=""}))}},mounted:function(){var t=this;axios.get("/empresas/historico/"+t.empresa.idEmpresa).then((function(e){t.historicos=e.data,t.montou=!0,setTimeout((function(){t.carregando=!1}),200)}))}},i=(a(298),a(164)),o=Object(i.a)(s,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content"},[t.carregando?a("BlockUI",{attrs:{message:t.mensagem,html:t.html}}):t._e(),t._v(" "),t.montou?a("div",{staticClass:"box box-info"},[a("div",{staticClass:"box-body table-responsive"},[a("table",{staticClass:"table table-hover table-striped"},[a("tbody",[t._m(0),t._v(" "),t._l(t.historicos,(function(e){return a("tr",[a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{width:"80px"}},[a("b",[t._v(t._s(e.idEmpresaHistorico))])]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(t._f("moment")(e.dataIni,"DD/MM/Y")))]),t._v(" "),e.dataFim?a("td",{staticClass:"text-center"},[t._v(t._s(t._f("moment")(e.dataFim,"DD/MM/Y")))]):t._e(),t._v(" "),e.dataFim?t._e():a("td",{staticClass:"text-center"},[a("button",{staticClass:"btn btn-sm btn-outline-danger",on:{click:function(e){return t.desativar()}}},[t._v("Desativar")])])])}))],2)])]),t._v(" "),a("div",{staticClass:"box-footer clearfix"},[t.historicos[t.historicos.length-1].dataFim?a("div",{staticClass:"col-md-12 no-padding text-center"},[a("button",{staticClass:"btn btn-success",attrs:{type:"button"},on:{click:function(e){return t.ativar()}}},[a("i",{staticClass:"fa fa-block"}),t._v(" Ativar Empresa")])]):t._e()])]):t._e(),t._v(" "),a("b-modal",{ref:"myModal",attrs:{size:"sm",centered:"","no-close-on-backdrop":!0,"hide-header":!0,"hide-header-close":!0,"no-close-on-esc":!0,title:"","ok-title":"Ok","cancel-title":"Cancelar",id:"modal1"},on:{ok:t.ok,cancel:function(e){return t.fechar()}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Data")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.dataFinal,expression:"dataFinal"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:t.dataFinal},on:{input:function(e){e.target.composing||(t.dataFinal=e.target.value)}}})])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("tr",[e("th",{staticClass:"text-center"},[this._v("\n                            Código\n                           \n                        ")]),this._v(" "),e("th",{staticClass:"text-center"},[this._v("Data Inicial")]),this._v(" "),e("th",{staticClass:"text-center"},[this._v("Data Final")])])}],!1,null,null,null);e.default=o.exports}}]);