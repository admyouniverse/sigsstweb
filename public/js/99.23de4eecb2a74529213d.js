(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{0:function(s,o,e){"use strict";function t(s,o,e,t,a,i,r,n){var l,c="function"==typeof s?s.options:s;if(o&&(c.render=o,c.staticRenderFns=e,c._compiled=!0),t&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),r?(l=function(s){(s=s||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(s=__VUE_SSR_CONTEXT__),a&&a.call(this,s),s&&s._registeredComponents&&s._registeredComponents.add(r)},c._ssrRegister=l):a&&(l=n?function(){a.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:a),l)if(c.functional){c._injectStyles=l;var p=c.render;c.render=function(s,o){return l.call(o),p(s,o)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:s,options:c}}e.d(o,"a",(function(){return t}))},98:function(s,o,e){"use strict";e.r(o);var t={props:["ppra"],data:function(){return{profissional01:{pessoa:{}},profissional02:{pessoa:{}},representanteSelecionado:{},medicosBase:[],nomeRepresentante:"",cpfRepresentante:"",cargoRepresentante:"",funcionarios:[],responsavel:"",complemento:"",historicos:[],edicao:{},tipoProfissional:0}},methods:{listaGrupo:function(s){return"MÉDICO_COORDENADOR_PCMSO"==s.grupoProfissional?(s.pessoa.sexo,"Médico Coordenado do PCMSO"):"MÉDICO_EXAMINADOR"==s.grupoProfissional?"MASCULINO"==s.pessoa.sexo?"Médico Examinador":"Médica Examinadora":"TÉCNICO_SEG_TRABALHO"==s.grupoProfissional?"MASCULINO"==s.pessoa.sexo?"Téc de Segurança do Trabalho":"Técª de Segurança do Trabalho":"TÉCNICO_ENF_TRABALHO"==s.grupoProfissional?"MASCULINO"==s.pessoa.sexo?"Téc de Enfermagem do Trabalho":"Técª de Enfermagem do Trabalho":"ENFERMEIRO_TRABALHO"==s.grupoProfissional?"MASCULINO"==s.pessoa.sexo?"Enfermeiro do Trabalho":"Enfermeira do Trabalho":"PREPOSTO_PPP"==s.grupoProfissional?"PREPOSTO":void 0},tipoPpra:function(s){return"EMISSÃO"==s?"Emissão":"REVISÃO_PARCIAL"==s?"Revisão Parcial":"REVISÃO_GERAL"==s?"Revisão Geral":void 0},modalResponsavel:function(s){this.edicao=s,this.$refs.modalResponsavel.show()},modalComplemento:function(s){this.edicao=s,this.$refs.modalComplemento.show()},salvarResponsavel:function(){var s=this;axios.post("/gro/"+this.ppra.idPpra+"/revisao-historico",{empresaProfissional:s.edicao.empresaProfissional,empresaProfissional02:s.edicao.empresaProfissional02,representante:s.edicao.empresaFuncionario,nome:s.edicao.representante,cpf:s.edicao.cpf,cargo:s.edicao.cargo,complemento:s.edicao.complemento,responsavel:s.edicao.responsavel,idPpraHistoricoRevisao:s.edicao.idPpraHistoricoRevisao}).then((function(o){s.historicos=o.data,s.edicao={}}))},fechar:function(){},modalProfissional:function(s){var o=this;this.tipoProfissional=s,axios.post("/gro/medicos",{data:o.ppra.dataHora}).then((function(s){o.medicosBase=s.data,o.$refs.modalProfissional.show(),console.log(s.data)}))},selecionarProfissional:function(s){1==this.tipoProfissional?this.profissional01=s:this.profissional02=s,this.$refs.modalProfissional.hide()},modalPessoas:function(){var s=this;axios.get("/empresas/funcionarios/"+s.ppra.empresasContrato[0].empresa.idEmpresa).then((function(o){s.funcionarios=o.data,console.log(o.data),s.$refs.modalPessoas.show()}))},selecionaPessoa:function(s){this.representanteSelecionado=s,this.nomeRepresentante=this.representanteSelecionado.pessoa.nomePessoa,this.cpfRepresentante=this.representanteSelecionado.pessoa.cpf,this.cargoRepresentante=this.representanteSelecionado.funcao.cargo,this.$refs.modalPessoas.hide()},limparPessoa:function(){this.representanteSelecionado={}},salvar:function(){var s=this;if(this.historicos.length>0)var o=this.historicos[0].idPpraHistoricoRevisao;else o=0;axios.post("/gro/"+this.ppra.idPpra+"/revisao-historico",{empresaProfissional:s.profissional01,empresaProfissional02:s.profissional02,representante:s.nomeRepresentante,nome:s.nomeRepresentante,cpf:s.cpfRepresentante,cargo:s.cargoRepresentante,complemento:s.complemento,responsavel:s.responsavel,idPpraHistoricoRevisao:o}).then((function(o){s.historicos=o.data}))}},mounted:function(){var s=this;axios.get("/gro/"+this.ppra.idPpra+"/revisao-historico").then((function(o){console.log(o.data),s.historicos=o.data,o.data.length>0&&(s.profissional01=s.historicos[0].empresaProfissional,s.profissional02=s.historicos[0].empresaProfissional02,s.nomeRepresentante=s.historicos[0].representante,s.cpfRepresentante=s.historicos[0].cpf,s.cargoRepresentante=s.historicos[0].cargo,s.responsavel=s.historicos[0].responsavel,s.complemento=s.historicos[0].complemento,s.edicao.complemento=s.historicos[0].complemento,s.edicao.responsavel=s.historicos[0].responsavel)}))}},a=e(0),i=Object(a.a)(t,(function(){var s=this,o=s.$createElement,e=s._self._c||o;return e("div",[e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v("Resp. Téc do GRO 01")]),s._v(" "),e("div",{staticClass:"input-group mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.profissional01.titulo+". "+s.profissional01.pessoa.nomePessoa,expression:"profissional01.titulo + '. ' + profissional01.pessoa.nomePessoa"}],staticClass:"form-control",attrs:{type:"text",readonly:"",placeholder:"Clique no botão"},domProps:{value:s.profissional01.titulo+". "+s.profissional01.pessoa.nomePessoa},on:{input:function(o){o.target.composing||s.$set(s.profissional01.titulo+". "+s.profissional01.pessoa,"nomePessoa",o.target.value)}}}),s._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(o){return s.modalProfissional(1)}}},[e("i",{staticClass:"fa fa-search"})])])])])]),s._v(" "),e("div",{staticClass:"col-md-6"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v("Resp. Téc do GRO 02")]),s._v(" "),e("div",{staticClass:"input-group mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.profissional02.titulo+". "+s.profissional02.pessoa.nomePessoa,expression:"profissional02.titulo + '. ' + profissional02.pessoa.nomePessoa"}],staticClass:"form-control",attrs:{type:"text",readonly:"",placeholder:"Clique no botão"},domProps:{value:s.profissional02.titulo+". "+s.profissional02.pessoa.nomePessoa},on:{input:function(o){o.target.composing||s.$set(s.profissional02.titulo+". "+s.profissional02.pessoa,"nomePessoa",o.target.value)}}}),s._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:function(o){return s.modalProfissional(2)}}},[e("i",{staticClass:"fa fa-search"})])])])])]),s._v(" "),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v("Representante da Empresa")]),s._v(" "),e("div",{staticClass:"input-group mb-3"},[e("input",{directives:[{name:"model",rawName:"v-model",value:s.nomeRepresentante,expression:"nomeRepresentante"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Pessoa"},domProps:{value:s.nomeRepresentante},on:{keydown:s.limparPessoa,input:function(o){o.target.composing||(s.nomeRepresentante=o.target.value)}}}),s._v(" "),e("div",{staticClass:"input-group-append"},[e("button",{staticClass:"btn btn-outline-secondary",attrs:{type:"button"},on:{click:s.modalPessoas}},[e("i",{staticClass:"fa fa-search"})])])])])]),s._v(" "),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v("CPF")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.cpfRepresentante,expression:"cpfRepresentante"},{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:s.cpfRepresentante},on:{keydown:s.limparPessoa,input:function(o){o.target.composing||(s.cpfRepresentante=o.target.value)}}})])]),s._v(" "),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v("Cargo")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.cargoRepresentante,expression:"cargoRepresentante"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:s.cargoRepresentante},on:{keydown:s.limparPessoa,input:function(o){o.target.composing||(s.cargoRepresentante=o.target.value)}}})])]),s._v(" "),s._m(0),s._v(" "),e("div",{staticClass:"col-md-4"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v("CPF")]),s._v(" "),e("input",{directives:[{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"}],staticClass:"form-control",attrs:{type:"text"}})])]),s._v(" "),s._m(1),s._v(" "),e("div",{staticClass:"col-md-12"},[e("button",{staticClass:"btn btn-success",on:{click:s.salvar}},[e("i",{staticClass:"fa fa-check"}),s._v(" Salvar")])])]),s._v(" "),e("hr"),s._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-md-12"},[e("table",{staticClass:"table"},[e("tbody",[s._m(2),s._v(" "),s._l(s.historicos,(function(o){return e("tr",[e("td",[s._v(s._s(s.ppra.versao))]),s._v(" "),e("td",[s._v(s._s(s._f("moment")(s.ppra.dataHora,"DD/MM/YYYY")))]),s._v(" "),o.empresaProfissional?s._e():e("td"),s._v(" "),o.empresaProfissional?e("td",[e("strong",[s._v(s._s(o.empresaProfissional.titulo)+". ")]),s._v(" "+s._s(o.empresaProfissional.pessoa.nomePessoa)),o.empresaProfissional02?e("span",[s._v(", "),e("strong",[s._v(s._s(o.empresaProfissional02.titulo)+". ")]),s._v(" "+s._s(o.empresaProfissional02.pessoa.nomePessoa))]):s._e(),o.responsavel?e("span",[s._v(", "+s._s(o.responsavel)+" ")]):s._e(),s._v(" "),e("button",{staticClass:"btn btn-sm btn-link",on:{click:function(e){return s.modalResponsavel(o)}}},[s._v("Alterar")])]):s._e(),s._v(" "),e("td",[e("strong",[s._v(s._s(s.tipoPpra(s.ppra.tipoPpra)))]),s._v(", "+s._s(o.complemento)+" "),e("button",{staticClass:"btn btn-sm btn-link",on:{click:function(e){return s.modalComplemento(o)}}},[s._v("Alterar")])])])}))],2)])])]),s._v(" "),e("b-modal",{ref:"modalProfissional",attrs:{size:"lg",centered:"","hide-footer":!0,title:"Responsável Técnico PPRA",id:"modal1"}},[e("table",{staticClass:"table-striped table-hover table"},[s.medicosBase.length>0?e("tbody",[e("tr",[e("th",[s._v("Conselho")]),s._v(" "),e("th",[s._v("Nome")]),s._v(" "),e("th",[s._v("Grupo Profissional")])]),s._v(" "),s._l(s.medicosBase,(function(o){return o.idEmpresaProfissional!=s.profissional01.idEmpresaProfissional&&o.idEmpresaProfissional!=s.profissional02.idEmpresaProfissional&&"PREPOSTO_PPP"!=o.tipoProfissional?e("tr",{staticStyle:{cursor:"pointer"},on:{click:function(e){return s.selecionarProfissional(o)}}},[e("td",[s._v(s._s(o.numeroRegistro))]),s._v(" "),e("td",[s._v(s._s(o.pessoa.nomePessoa))]),s._v(" "),e("td",[s._v(s._s(s.listaGrupo(o)))])]):s._e()}))],2):s._e()])]),s._v(" "),e("b-modal",{ref:"modalPessoas",attrs:{size:"lg",centered:"","hide-footer":!0,title:"Pessoas",id:"modal1"}},[e("table",{staticClass:"table-striped table-hover table"},[e("tbody",[e("tr",[e("th",[s._v("Nome")]),s._v(" "),e("th",[s._v("CPF")]),s._v(" "),e("th",[s._v("Cargo")])]),s._v(" "),s._l(s.funcionarios,(function(o){return e("tr",{staticStyle:{cursor:"pointer"},on:{click:function(e){return s.selecionaPessoa(o)}}},[e("td",[s._v(s._s(o.pessoa.nomePessoa))]),s._v(" "),e("td",[s._v(s._s(o.pessoa.cpf))]),s._v(" "),e("td",[s._v(s._s(o.funcao.cargo))])])}))],2)])]),s._v(" "),e("b-modal",{ref:"modalResponsavel",attrs:{size:"xs",centered:"","no-close-on-backdrop":!0,"hide-header-close":!0,"no-close-on-esc":!0,title:"Alterar Elaboradores","ok-title":"Salvar","cancel-title":"Cancelar",id:"modal1"},on:{ok:s.salvarResponsavel,cancel:function(o){return s.fechar()}}},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v("Elaborador(es)")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.edicao.responsavel,expression:"edicao.responsavel"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:s.edicao.responsavel},on:{input:function(o){o.target.composing||s.$set(s.edicao,"responsavel",o.target.value)}}})])])]),s._v(" "),e("b-modal",{ref:"modalComplemento",attrs:{size:"xs",centered:"","no-close-on-backdrop":!0,"hide-header-close":!0,"no-close-on-esc":!0,title:"Alterar Complemento","ok-title":"Salvar","cancel-title":"Cancelar",id:"modal2"},on:{ok:s.salvarResponsavel,cancel:function(o){return s.fechar()}}},[e("div",{staticClass:"col-md-12"},[e("div",{staticClass:"form-group"},[e("label",{attrs:{for:""}},[s._v("Complemento")]),s._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:s.edicao.complemento,expression:"edicao.complemento"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:s.edicao.complemento},on:{input:function(o){o.target.composing||s.$set(s.edicao,"complemento",o.target.value)}}})])])])],1)}),[function(){var s=this.$createElement,o=this._self._c||s;return o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[this._v("Representante dos Trabalhadores")]),this._v(" "),o("div",{staticClass:"input-group mb-3"},[o("input",{staticClass:"form-control",attrs:{type:"text",disabled:""}}),this._v(" "),o("div",{staticClass:"input-group-append"},[o("button",{staticClass:"btn btn-outline-secondary",attrs:{disabled:"",type:"button"}},[o("i",{staticClass:"fa fa-search"})])])])])])},function(){var s=this.$createElement,o=this._self._c||s;return o("div",{staticClass:"col-md-4"},[o("div",{staticClass:"form-group"},[o("label",{attrs:{for:""}},[this._v("Cargo")]),this._v(" "),o("input",{staticClass:"form-control",attrs:{type:"text"}})])])},function(){var s=this.$createElement,o=this._self._c||s;return o("tr",[o("th",[this._v("Versão GRO")]),this._v(" "),o("th",[this._v("Data GRO")]),this._v(" "),o("th",[this._v("Elaborador(es)")]),this._v(" "),o("th",[this._v("Complemento")])])}],!1,null,null,null);o.default=i.exports}}]);