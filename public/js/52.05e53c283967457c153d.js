(window.webpackJsonp=window.webpackJsonp||[]).push([[52],{0:function(a,s,t){"use strict";function e(a,s,t,e,o,i,n,r){var l,c="function"==typeof a?a.options:a;if(s&&(c.render=s,c.staticRenderFns=t,c._compiled=!0),e&&(c.functional=!0),i&&(c._scopeId="data-v-"+i),n?(l=function(a){(a=a||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(a=__VUE_SSR_CONTEXT__),o&&o.call(this,a),a&&a._registeredComponents&&a._registeredComponents.add(n)},c._ssrRegister=l):o&&(l=r?function(){o.call(this,(c.functional?this.parent:this).$root.$options.shadowRoot)}:o),l)if(c.functional){c._injectStyles=l;var p=c.render;c.render=function(a,s){return l.call(s),p(a,s)}}else{var d=c.beforeCreate;c.beforeCreate=d?[].concat(d,l):[l]}return{exports:a,options:c}}t.d(s,"a",(function(){return e}))},172:function(a,s,t){var e=t(314);"string"==typeof e&&(e=[[a.i,e,""]]);var o={hmr:!0,transform:void 0,insertInto:void 0};t(2)(e,o);e.locals&&(a.exports=e.locals)},313:function(a,s,t){"use strict";t(172)},314:function(a,s,t){(a.exports=t(1)(!1)).push([a.i,".v-select input[type=search]{margin:0}.v-select .selected-tag{margin-top:0;background-color:#fff;border-color:#fff}.v-select .vs__selected-options{padding-top:6px;padding-bottom:6px}.v-select .dropdown-toggle{padding:0;background:#fff}.editar-sair{margin-top:5px}",""])},90:function(a,s,t){"use strict";t.r(s);function e(a,s,t){return s in a?Object.defineProperty(a,s,{value:t,enumerable:!0,configurable:!0,writable:!0}):a[s]=t,a}var o={props:["pessoadb","editar"],data:function(){var a;return e(a={pessoa:{idPessoa:"",nomePessoa:"",cpf:"",pis:"",ctps:"",dataNascimento:"",sexo:"",tipoSangue:"",observacao:"",pais:{idPais:1,nome:"Brasil",codigoPais:"1  "},estrangeiro:"",endereco:"",bairro:"",cep:"",telefone:"",email:"",escolaridade:"",status:"A",biometriaTemplate:""},paises:[],outro:"",mensagem:"Carregando dados da pessoa...",html:'<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>',carregando:!0,options:[],cidade:[],msgCpf:"",montou:!1,show:!1},"msgCpf",""),e(a,"estados",[{nome:"Acre",sigla:"AC"},{nome:"Alagoas",sigla:"AL"},{nome:"Amapá",sigla:"AP"},{nome:"Amazonas",sigla:"AM"},{nome:"Bahia",sigla:"BA"},{nome:"Ceará",sigla:"CE"},{nome:"Distrito Federal",sigla:"DF"},{nome:"Espírito Santo",sigla:"ES"},{nome:"Goiás",sigla:"GO"},{nome:"Maranhão",sigla:"MA"},{nome:"Mato Grosso",sigla:"MT"},{nome:"Mato Grosso do Sul",sigla:"MS"},{nome:"Minas Gerais",sigla:"MG"},{nome:"Pará",sigla:"PA"},{nome:"Paraíba",sigla:"PB"},{nome:"Paraná",sigla:"PR"},{nome:"Pernambuco",sigla:"PE"},{nome:"Piauí",sigla:"PI"},{nome:"Rio de Janeiro",sigla:"RJ"},{nome:"Rio Grande do Norte",sigla:"RN"},{nome:"Rio Grande do Sul",sigla:"RS"},{nome:"Rondônia",sigla:"RO"},{nome:"Roraima",sigla:"RR"},{nome:"Santa Catarina",sigla:"SC"},{nome:"São Paulo",sigla:"SP"},{nome:"Sergipe",sigla:"SE"},{nome:"Tocantins",sigla:"TO"}]),a},methods:{verificaCpf:function(){var a=this;/^[0-9]{3}.[0-9]{3}.[0-9]{3}-[0-9]{2}$/.test(this.pessoa.cpf)?axios.get("/pessoas/cpf/"+this.pessoa.cpf).then((function(s){""!=s.data?a.pessoa.idPessoa!=s.data.idPessoa&&(a.msgCpf="CPF já usado por "+s.data.nomePessoa,a.outro=s.data.idPessoa,a.show=!0,$("#cpf").focus()):a.show=!1})):this.show=!1},digital:function(){var a=this;axios.get("http://localhost:9000/api/public/v1/captura/Enroll/1").then((function(s){a.pessoa.biometriaTemplate=s.data,a.salvar()})).catch((function(s){a.$alert("Erro. Verifique se o software está instalado!","Ops!","error")}))},editarOutro:function(){window.location.href="/pessoas/detalhes/"+this.outro},sair:function(){this.outro="",this.show=!1,this.pessoa.cpf="",setTimeout((function(){this.show=!1}),2e3),$("#cpf").blur()},salvar:function(){var a=this;this.carregando=!0,this.html='<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>',this.mensagem="Aguarde...",this.editar?(console.log("editar!!!"),axios.post("/pessoas/"+this.pessoa.idPessoa+"/editar",{pessoa:a.pessoa,cidade:a.cidade,imagem:a.$store.state.avatar}).then((function(s){"erro"!=s.data?(a.html="<i class='fa fa-check fa-2x'></i>",a.mensagem="Sucesso! Dados atualizados."):(a.html="<i class='fa fa-close fa-2x'></i>",a.mensagem="Falha! Verifique os dados."),setTimeout((function(){a.carregando=!1}),1e3)}))):axios.post("/pessoas",{pessoa:a.pessoa,cidade:a.cidade,imagem:a.$store.state.avatar}).then((function(s){"erro"!=s.data?(a.html="<i class='fa fa-check fa-2x'></i>",a.mensagem="Sucesso!",window.location.href="/pessoas/detalhes/"+s.data):(a.html="<i class='fa fa-close fa-2x'></i>",a.mensagem="Falha! Verifique os dados."),setTimeout((function(){a.carregando=!1}),1e3)}))},onSearch:function(a,s){s(!0),this.search(s,a,this)},search:_.debounce((function(a,s,t){fetch("".concat(window.location.origin,"/tabelas/cidades/buscar/nome/").concat(escape(s))).then((function(s){console.log(s),s.json().then((function(a){t.options=a})),a(!1)}))}),350)},mounted:function(){1==this.editar&&(this.pessoa=this.pessoadb,console.log(this.pessoadb),this.$store.state.avatar=this.pessoa.urlImagem,this.cidade=this.pessoa.cidadeNatal),this.carregando=!1;var a=this;this.montou=!0,axios.get("/tabelas/paises/list").then((function(s){a.paises=s.data}))}},i=(t(313),t(0)),n=Object(i.a)(o,(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("div",{staticClass:"container"},[a.carregando?t("BlockUI",{attrs:{message:a.mensagem,html:a.html}}):a._e(),a._v(" "),t("div",{staticClass:"row justify-content-end"},[t("div",{staticClass:"box-header"},[a.editar?t("div",{staticClass:"col-md-12 no-padding"},[a._m(0)]):a._e()])]),a._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("div",[t("b-card",{staticClass:"sig",attrs:{"no-body":""}},[t("b-tabs",{attrs:{card:""}},[t("b-tab",{attrs:{title:"Detalhes",active:""}},[t("b-card-text",[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-9"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-1"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("ID")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.pessoa.idPessoa,expression:"pessoa.idPessoa"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:a.pessoa.idPessoa},on:{input:function(s){s.target.composing||a.$set(a.pessoa,"idPessoa",s.target.value)}}})])]),a._v(" "),t("div",{staticClass:"col-md-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("CPF")]),a._v(" "),t("input",{directives:[{name:"mask",rawName:"v-mask",value:"###.###.###-##",expression:"'###.###.###-##'"},{name:"model",rawName:"v-model",value:a.pessoa.cpf,expression:"pessoa.cpf"}],staticClass:"form-control",attrs:{id:"cpf"},domProps:{value:a.pessoa.cpf},on:{blur:a.verificaCpf,input:function(s){s.target.composing||a.$set(a.pessoa,"cpf",s.target.value)}}})])]),a._v(" "),a.show?t("b-popover",{attrs:{placement:"topright",show:a.show,target:"cpf","no-title":""},on:{"update:show":function(s){a.show=s}}},[a._v("\n                                               "+a._s(a.msgCpf)+"\n                                               "),t("button",{staticClass:"btn btn-primary btn-sm editar-sair",on:{click:a.editarOutro}},[t("i",{staticClass:"fas fa-pencil-alt"})]),a._v(" "),t("button",{staticClass:"btn btn-secondary btn-sm editar-sair",on:{click:a.sair}},[t("i",{staticClass:"fas fa-sign-out-alt"})])]):a._e(),a._v(" "),t("div",{staticClass:"col-md-5"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("Nome")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.pessoa.nomePessoa,expression:"pessoa.nomePessoa"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:a.pessoa.nomePessoa},on:{input:function(s){s.target.composing||a.$set(a.pessoa,"nomePessoa",s.target.value)}}})])]),a._v(" "),t("div",{staticClass:"col-md-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("Nascimento")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.pessoa.dataNascimento,expression:"pessoa.dataNascimento"}],staticClass:"form-control",attrs:{type:"date"},domProps:{value:a.pessoa.dataNascimento},on:{input:function(s){s.target.composing||a.$set(a.pessoa,"dataNascimento",s.target.value)}}})])])],1),a._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("PIS")]),a._v(" "),t("input",{directives:[{name:"mask",rawName:"v-mask",value:"###.#####.##-#",expression:"'###.#####.##-#'"},{name:"model",rawName:"v-model",value:a.pessoa.pis,expression:"pessoa.pis"}],staticClass:"form-control",domProps:{value:a.pessoa.pis},on:{input:function(s){s.target.composing||a.$set(a.pessoa,"pis",s.target.value)}}})])]),a._v(" "),t("div",{staticClass:"col-md-4"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("CTPS")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.pessoa.ctps,expression:"pessoa.ctps"}],staticClass:"form-control",attrs:{placeholder:"1111111 1111 AA"},domProps:{value:a.pessoa.ctps},on:{input:function(s){s.target.composing||a.$set(a.pessoa,"ctps",s.target.value)}}})])]),a._v(" "),t("div",{staticClass:"col-md-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("Gênero")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.pessoa.sexo,expression:"pessoa.sexo"}],staticClass:"form-control",on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.pessoa,"sexo",s.target.multiple?t:t[0])}}},[t("option",{attrs:{value:"MASCULINO"}},[a._v("Masculino")]),a._v(" "),t("option",{attrs:{value:"FEMININO"}},[a._v("Feminino")])])])]),a._v(" "),t("div",{staticClass:"col-md-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("Estado Civil")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.pessoa.estadoCivil,expression:"pessoa.estadoCivil"}],staticClass:"form-control",on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.pessoa,"estadoCivil",s.target.multiple?t:t[0])}}},[t("option",{attrs:{value:"SELECIONE"}},[a._v("Nenhum")]),a._v(" "),t("option",{attrs:{value:"SOLTEIRO"}},[a._v("Solteiro")]),a._v(" "),t("option",{attrs:{value:"CASADO"}},[a._v("Casado")]),a._v(" "),t("option",{attrs:{value:"DIVORCIDADO"}},[a._v("Divorciado")]),a._v(" "),t("option",{attrs:{value:"VIÚVO"}},[a._v("Viúvo")]),a._v(" "),t("option",{attrs:{value:"UNIÃO_ESTAVEL"}},[a._v("União Estável")]),a._v(" "),t("option",{attrs:{value:"OUTROS"}},[a._v("Outros")])])])])]),a._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("Nacionalidade")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.pessoa.pais,expression:"pessoa.pais"}],staticClass:"form-control",on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.pessoa,"pais",s.target.multiple?t:t[0])}}},a._l(a.paises,(function(s){return t("option",{domProps:{value:s}},[a._v(a._s(s.nome)+"\n                                                        ")])})),0)])]),a._v(" "),t("div",{staticClass:"col-md-6"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("Naturalidade")]),a._v(" "),t("v-select",{attrs:{disabled:!a.pessoa.pais||"Brasil"!=a.pessoa.pais.nome,label:"idCidade",filterable:!1,options:a.options},on:{search:a.onSearch},scopedSlots:a._u([{key:"option",fn:function(s){return[t("div",{staticClass:"d-center"},[a._v("\n                                                                "+a._s(s.nomeCidade)+" - "+a._s(s.uf)+"\n                                                            ")])]}},{key:"selected-option",fn:function(s){return[t("div",{staticClass:"selected d-center"},[a._v("\n                                                                "+a._s(s.nomeCidade)+" - "+a._s(s.uf)+"\n                                                            ")])]}}]),model:{value:a.cidade,callback:function(s){a.cidade=s},expression:"cidade"}},[t("template",{slot:"no-options"},[a._v("\n                                                            digite para procurar um EPI...\n                                                        ")])],2)],1)]),a._v(" "),t("div",{staticClass:"col-md-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("Tipo Sanguineo")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.pessoa.tipoSangue,expression:"pessoa.tipoSangue"}],staticClass:"form-control",attrs:{disabled:""},domProps:{value:a.pessoa.tipoSangue},on:{input:function(s){s.target.composing||a.$set(a.pessoa,"tipoSangue",s.target.value)}}})])])])]),a._v(" "),t("div",{staticClass:"col-md-3"},[t("imagem-componente",{attrs:{imagem:this.pessoa}})],1),a._v(" "),t("div",{staticClass:"col-md-12"},[t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-3"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("Fone")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.pessoa.telefone,expression:"pessoa.telefone"}],staticClass:"form-control",domProps:{value:a.pessoa.telefone},on:{input:function(s){s.target.composing||a.$set(a.pessoa,"telefone",s.target.value)}}})])]),a._v(" "),t("div",{staticClass:"col-md-4"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("Email")]),a._v(" "),t("input",{directives:[{name:"model",rawName:"v-model",value:a.pessoa.email,expression:"pessoa.email"}],staticClass:"form-control",attrs:{type:"email"},domProps:{value:a.pessoa.email},on:{input:function(s){s.target.composing||a.$set(a.pessoa,"email",s.target.value)}}})])]),a._v(" "),t("div",{staticClass:"col-md-2"},[t("div",{staticClass:"form-group"},[t("label",{attrs:{for:""}},[a._v("Status")]),a._v(" "),t("select",{directives:[{name:"model",rawName:"v-model",value:a.pessoa.status,expression:"pessoa.status"}],staticClass:"form-control",attrs:{disabled:""},on:{change:function(s){var t=Array.prototype.filter.call(s.target.options,(function(a){return a.selected})).map((function(a){return"_value"in a?a._value:a.value}));a.$set(a.pessoa,"status",s.target.multiple?t:t[0])}}},[t("option",{attrs:{value:"A"}},[a._v("Ativo")]),a._v(" "),t("option",{attrs:{value:"I"}},[a._v("Inativo")]),a._v(" "),t("option",{attrs:{value:"D"}},[a._v("Afastado por doença")]),a._v(" "),t("option",{attrs:{value:"AT"}},[a._v("Afastado por acidente")])])])]),a._v(" "),t("div",{staticClass:"col-md-3"},[a.pessoa.biometriaTemplate?a._e():t("button",{staticClass:"btn btn-secondary btn-block mt-4",on:{click:a.digital}},[t("i",{staticClass:"fa fa-fingerprint"}),a._v(" Registrar")]),a._v(" "),a.pessoa.biometriaTemplate?t("button",{staticClass:"btn btn-success btn-block mt-4",on:{click:a.digital}},[t("i",{staticClass:"fa fa-fingerprint"}),a._v(" Atualizar")]):a._e()])])])]),a._v(" "),t("div",{staticClass:"row"},[t("div",{staticClass:"col-md-12"},[t("button",{staticClass:"btn btn-success",attrs:{type:""},on:{click:a.salvar}},[a._v("Salvar")])])])])],1),a._v(" "),t("b-tab",{attrs:{title:"Hist. Empresas"}},[t("b-card-text")],1),a._v(" "),t("b-tab",{attrs:{title:"Hist. Funções"}},[t("b-card-text",[a.editar&&this.montou?t("pessoa-funcao-componente",{attrs:{pessoa:a.pessoa}}):a._e()],1)],1),a._v(" "),t("b-tab",{attrs:{title:"Capacitações"}},[t("b-card-text",[a.editar&&this.montou?t("pessoa-capacitacao-componente",{attrs:{pessoa:a.pessoa}}):a._e()],1)],1)],1)],1)],1)])])],1)}),[function(){var a=this.$createElement,s=this._self._c||a;return s("button",{staticClass:"btn btn-outline-danger",attrs:{type:""}},[s("i",{staticClass:"fa fa-trash"}),this._v(" Remover Pessoa")])}],!1,null,null,null);s.default=n.exports}}]);