(window.webpackJsonp=window.webpackJsonp||[]).push([[1,84],{0:function(t,e,a){"use strict";function o(t,e,a,o,s,r,i,n){var c,d="function"==typeof t?t.options:t;if(e&&(d.render=e,d.staticRenderFns=a,d._compiled=!0),o&&(d.functional=!0),r&&(d._scopeId="data-v-"+r),i?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),s&&s.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(i)},d._ssrRegister=c):s&&(c=n?function(){s.call(this,(d.functional?this.parent:this).$root.$options.shadowRoot)}:s),c)if(d.functional){d._injectStyles=c;var l=d.render;d.render=function(t,e){return c.call(e),l(t,e)}}else{var m=d.beforeCreate;d.beforeCreate=m?[].concat(m,c):[c]}return{exports:t,options:d}}a.d(e,"a",(function(){return o}))},107:function(t,e,a){"use strict";a.r(e);var o={components:{TamanhosEpiComponente:a(8).default},props:["empresa","posto","usuario"],data:function(){return{carregando:!1,mensagem:"",html:'<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>',entregas:[],funcionarios:[],liberados:[],liberado:{},inativos:[],entrega:{idEntregaEpi:0,empresaFuncionario:{pessoa:{},ambienteTrabalho:{},empresaContrato:{empresaContratante:{}},funcao:{}}},dataMaxima:"",estoques:[],selecionado:{},historicos:"",entregaItens:[],entregaItemHistorico:{entregaEpiItens:{estoque:{gradeEmpresaEpi:{cadastroEpiCa:{cadastroEpi:{epi:{}}},cor:{},tamanho:{}}},quantidade:0},quantidade:0},trocados:0}},computed:{hoje:function(){var t=new Date,e=t.getFullYear(),a=t.getMonth()+1;a<10&&(a="0"+a);var o=t.getDate();return o<10&&(o="0"+o),e+"-"+a+"-"+o},parametro:function(){var t=window.location.search.substring(1);return new URLSearchParams(t).get("acao")}},methods:{abrirHistorico:function(t){this.historicos=t,this.$refs.modalHistorico.show()},formatarHistorico:function(t){return"BLOQUEIO_POR_COR_ERRADA"==t.ocorrencia?"Bloqueio por cor errada":"BLOQUEIO_POR_TAMANHO_ERRADO"==t.ocorrencia?"Bloqueia por tamanho errado":"BLOQUEIO_POR_ENTREGA_ERRADA"==t.ocorrencia?"Bloqueia por entrega errada":"TROCA_POR_DEFEITO"==t.ocorrencia?"Troca de "+t.quantidade+" item(s) por defeito":"TROCA_POR_AVARIA"==t.ocorrencia?"Troca de "+t.quantidade+" item(s) por avaria":"TROCA_POR_EXTRAVIO"==t.ocorrencia?"Troca de "+t.quantidade+" item(s) por extravio":void 0},testaDataBloqueio:function(){(new Date(this.entrega.data)>new Date(this.entregaItemHistorico.data)||this.dataMaxima<new Date(this.entregaItemHistorico.data))&&(this.$alert("A data deve ser maior que a data de entrega e só pode ser realizada 30 dias depois dela.","Atenção!","warning"),this.entregaItemHistorico.data=this.entrega.data)},testaDataTroca:function(){(new Date(this.entrega.data)>new Date(this.entregaItemHistorico.data)||new Date(this.entregaItemHistorico.data)>new Date(this.entregaItemHistorico.entregaEpiItens.validade))&&(this.$alert("A data deve ser maior que a data de entrega e menor que o vencimento do EPI.","Atenção!","warning"),this.entregaItemHistorico.data=this.entrega.data)},salvarHistorico:function(t){var e=this;t.preventDefault(),""!=e.entregaItemHistorico.ocorrencia&&e.entregaItemHistorico.quantidade>0&&axios.post("/posto-entrega/entrega/historico",{dados:e.entregaItemHistorico}).then((function(t){e.visualizar(e.entrega),e.$refs.modalBloquear.hide(),e.$refs.modalTrocar.hide()}))},abrirBloquear:function(t){this.entregaItemHistorico.entregaEpiItens=Object.assign({},t),this.entregaItemHistorico.quantidade=this.entregaItemHistorico.entregaEpiItens.quantidade;var e=new Date(this.entrega.data);console.log("result",e),e.setDate(e.getDate()+30),this.dataMaxima=e,this.$refs.modalBloquear.show()},abrirTrocar:function(t){this.entregaItemHistorico.entregaEpiItens=Object.assign({},t),t.historico&&(console.log("historico",t.historico),this.trocados=t.historico.reduce((function(t,e){return t+e.quantidade}),0)),this.$refs.modalTrocar.show()},vencido:function(t){return new Date>new Date(t)},diff:function(t){var e=Vue.moment(t,"YYYY-MM-DD"),a=Vue.moment().startOf("day"),o=Vue.moment.duration(a.diff(e)).asDays();return o<=30},certeza:function(){this.$refs.modalCerteza.hide();var t=this;axios.get("/posto-entrega/entrega/remover/"+this.entrega.idEntregaEpi).then((function(e){axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/entrega-epis/").then((function(e){t.entregas=e.data,t.$refs.modalEntrega.hide()}))}))},fecharCerteza:function(){this.$refs.modalCerteza.hide()},removerEntrega:function(t){this.entrega=t,console.log(this.entrega),this.$refs.modalCerteza.show()},eHoje:function(t){return t.data==this.hoje},digital:function(){var t=this;axios.post("/posto-entrega/entrega/assinar",{entrega:t.entrega}).then((function(e){t.entrega.dataAssinatura=e.data,console.log(e.data),document.getElementById("data").dispatchEvent(new Event("input"))}))},exibeTabela:function(){$("#tabelaListagemEmpregados").DataTable({order:[[1,"desc"]],lengthMenu:[[50,-1],[50,"Todos"]],columnDefs:[{targets:"no-sort",orderable:!1}],language:{url:"//cdn.datatables.net/plug-ins/1.10.20/i18n/Portuguese-Brasil.json"}})},visualizar:function(t){console.log(t);var e=this;this.carregando=!0,this.mensagem="Carregando dados...",axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/entrega-epi-itens/listaPorIdEntregaEpi/"+t.idEntregaEpi).then((function(a){e.entrega=t,e.entregaItens=a.data;var o=e.entregaItens.length;e.entregaItens.map((function(a,s){axios.post("/posto-entrega/entrega/validade",{idAmbienteTrabalho:a.entregaEpi.empresaFuncionario.ambienteTrabalho.idAmbienteTrabalho,idEmpresa:a.entregaEpi.empresaFuncionario.empresaContrato.empresa.idEmpresa,idCadastroEpi:a.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.idCadastroEpi}).then((function(t){console.log("valide",t.data.validade);var o=new Date(e.entrega.data);o.setDate(o.getDate()+t.data.validade),console.log("data de validade",o),a.validade=o,e.$forceUpdate()})),axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/entrega-epi-itens-historico/listaPorIdEntregaEpiItens/"+a.idEntregaEpiItens).then((function(r){r.data.length>0?a.historico=r.data:a.historico=null,o==s+1&&(console.log("ENTREGA ITENS",e.entregaItens),axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/ambiente-cadastro-epis/listaPorIdEmpresaFuncionario/"+t.empresaFuncionario.idEmpresaFuncionario).then((function(t){e.liberados=t.data,e.liberados.map((function(t){t.carrinho=e.qtdCarrinho(t)})),e.$refs.modalEntrega.show(),e.carregando=!1})))}))}))}))},removerItem:function(t){console.log(this.entregaItens[t]);var e=this;this.entregaItens[t].idEntregaEpiItens>0?1==this.entregaItens.length?e.removerEntrega(e.entrega):axios.get("/posto-entrega/entrega/remover-item/"+this.entregaItens[t].idEntregaEpiItens).then((function(a){"true"==a.data.status&&axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/ambiente-cadastro-epis/listaPorIdEmpresaFuncionario/"+e.entrega.empresaFuncionario.idEmpresaFuncionario).then((function(a){e.liberados=a.data,e.entregaItens.splice(t,1),e.liberados.map((function(t){t.carrinho=e.qtdCarrinho(t),console.log(e.qtdCarrinho(t))})),e.carregando=!1}))})):this.entregaItens.splice(t,1)},qtdCarrinho:function(t){var e=this.entregaItens.filter((function(e){return e.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.idCadastroEpi==t.cadastroEpi.idCadastroEpi}));return e.length>0?e.reduce((function(t,e){return t+e.quantidade}),0):0},limite:function(t){var e=this.liberados.findIndex((function(e){return e.cadastroEpi.idCadastroEpi==t.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.idCadastroEpi})),a=this.liberados[e].quantidade-this.liberados[e].quantidadeEmUso-this.qtdCarrinho(this.liberados[e]),o=0;return o=t.estoque.quantidadeEstoque>a?a+t.quantidade:t.estoque.quantidadeEstoque<0?0:t.estoque.quantidadeEstoque,t.idEntregaEpiItens>0&&!t.entregaEpi.dataAssinatura?o+this.liberados[e].carrinho:o},selecionar:function(t){this.entrega={idEntregaEpi:0},this.entrega.empresaFuncionario=t,this.entrega.entregador=this.usuario;var e=this;this.entregaItens=[],this.carregando=!0,this.mensagem="Carregando dados...",axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/ambiente-cadastro-epis/listaPorIdEmpresaFuncionario/"+t.idEmpresaFuncionario).then((function(t){e.liberados=t.data,e.$refs.myModal.hide(),$("#tabelaListagemEmpregados").DataTable().destroy();var a=new Date;console.log(a);var o=a.getFullYear(),s=a.getMonth()+1,r=a.getDate();s<10&&(s="0"+s),r<10&&(r="0"+r),e.entrega.data=o+"-"+s+"-"+r,console.log("dataaa",e.entrega.data),e.$refs.modalEntrega.show(),e.carregando=!1}))},selecionarItem:function(t){this.selecionado=t,console.log(t),t.quantidadeEstoque>0?this.adicionarItem():alert("Estoque não disponivel")},adicionarItem:function(){var t=this,e=this.entregaItens.findIndex((function(e){return e.estoque.idEstoque==t.selecionado.idEstoque}));e>=0?this.entregaItens[e].quantidade=this.entregaItens[e].quantidade+1:this.entregaItens.push({estoque:t.selecionado,observacao:"",quantidade:1,valorUnitario:t.selecionado.valorUnitario,usuario:0,entregaEpi:0,idEntregaEpiItens:0}),console.log(this.selecionado),this.$refs.itensModal.hide()},abrir:function(){this.mensagem="Carregando empregados...";this.$refs.myModal.show()},estaAdicionado:function(t){return this.entregaItens.findIndex((function(e){return e.estoque.idEstoque==t.idEstoque}))>=0},abrirEstoque:function(t){var e=this;axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/estoques/listaPorIdPostoEntrega/"+this.posto.idPostoEntrega).then((function(a){e.estoques=a.data.filter((function(e){return e.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.idCadastroEpi==t.cadastroEpi.idCadastroEpi})),console.log(e.estoques),e.$refs.itensModal.show()}))},formataEstabelecimento:function(t){return"PRÓPRIO"==t?"P":"TERCEIROS"==t?"T":"SERVIÇOS_TERCEIROS"==t?"ST":void 0},formataTipo:function(t){return"ADMISSIONAL"==t?"Adm":"DEMISSIONAL"==t?"Dem":"MUDANÇA_DE_FUNÇÃO"==t?"M. Fun":"MUDANÇA_DE_CONTRATANTE"==t?"M. Con":"TRANSFERÊNCIA"==t?"Trans":void 0},formataSexo:function(t){return"MASCULINO"==t?"M":"FEMININO"==t?"F":void 0},salvar:function(t){t.preventDefault();var e=this;e.mensagem="Salvando...",e.carregando=!0,axios.post("/posto-entrega/entrega",{entrega:e.entrega,entregaitens:e.entregaItens}).then((function(t){axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/entrega-epis/").then((function(t){e.entregas=t.data,e.mensagem="Entrega salva!",e.$refs.modalEntrega.hide(),e.carregando=!1}))}))}},mounted:function(){var t=this;this.entrega.entregador=this.usuario,axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/entrega-epis/").then((function(e){t.entregas=e.data,console.log(t.entregas)})),axios.get("/empresas/funcionarios/"+t.empresa.idEmpresa).then((function(e){t.funcionarios=e.data}))}},s=(a(331),a(0)),r=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-card-text",[t.carregando?a("BlockUI",{attrs:{message:t.mensagem,html:t.html}}):t._e(),t._v(" "),t.entregas.length>0?a("table",{staticClass:"table table-hover table-striped",attrs:{id:"tabelaEntregas"}},[a("thead",[a("tr",[a("th",[t._v("ID")]),t._v(" "),a("th",[t._v("Data")]),t._v(" "),a("th",[t._v("Funcionário")]),t._v(" "),a("th",[t._v("Assinatura")]),t._v(" "),a("th",[t._v("Ação")])])]),t._v(" "),a("tbody",t._l(t.entregas,(function(e){return a("tr",{class:{"bg-primary":!e.dataAssinatura},staticStyle:{cursor:"pointer"},on:{click:function(a){return t.visualizar(e)}}},[a("td",[t._v(t._s(e.idEntregaEpi))]),t._v(" "),a("td",[t._v(t._s(t._f("moment")(e.data,"DD/MM/YYYY")))]),t._v(" "),a("td",[t._v(t._s(e.empresaFuncionario.pessoa.nomePessoa))]),t._v(" "),e.dataAssinatura?t._e():a("td",[t._v("Pendente")]),t._v(" "),e.dataAssinatura?a("td",[t._v(t._s(t._f("moment")(e.dataAssinatura,"DD/MM/YYYY")))]):t._e(),t._v(" "),a("td",[a("button",{staticClass:"btn btn-sm btn-outline-primary",on:{click:function(a){return t.visualizar(e)}}},[a("i",{staticClass:"fa fa-pencil-alt"})]),t._v(" "),e.dataAssinatura?t._e():a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(a){return a.stopPropagation(),t.removerEntrega(e)}}},[a("i",{staticClass:"fas fa-trash"})])])])})),0)]):t._e(),t._v(" "),a("div",{staticClass:"col-md-12 text-center"},[a("br"),t._v(" "),a("button",{staticClass:"btn btn-success",on:{click:function(e){return t.abrir()}}},[a("i",{staticClass:"fa fa-plus"}),t._v("\n            Adicionar")])]),t._v(" "),a("b-modal",{ref:"myModal",attrs:{title:"Escolha o funcionário","hide-footer":"",size:"xl"},on:{shown:t.exibeTabela}},[a("div",{staticClass:"col-md-12"},[a("div",{staticClass:"box-body box-empregados table-responsive"},[a("table",{staticClass:"table table-hover table-striped table-empregados",attrs:{id:"tabelaListagemEmpregados"}},[a("thead",[a("tr",[a("th",[t._v("ID")]),t._v(" "),a("th",[t._v("Matrícula")]),t._v(" "),a("th",[t._v("Nome")]),t._v(" "),a("th",[t._v("CPF")]),t._v(" "),a("th",[t._v("Dt. Adm")]),t._v(" "),a("th",[t._v("Dt. Cargo")]),t._v(" "),a("th",[t._v("Cargo")]),t._v(" "),a("th",[t._v("Ambiente")]),t._v(" "),a("th",[t._v("Dt. Nasc")]),t._v(" "),a("th",[t._v("Sexo")]),t._v(" "),a("th",[t._v("Tempo")]),t._v(" "),a("th",[t._v("Contratante")])])]),t._v(" "),a("tbody",t._l(t.funcionarios,(function(e){return a("tr",{staticStyle:{cursor:"pointer"},on:{click:function(a){return t.selecionar(e)}}},[a("td",[t._v(t._s(e.pessoa.idPessoa))]),t._v(" "),a("td",[t._v(t._s(e.matricula))]),t._v(" "),a("td",[t._v(t._s(e.pessoa.nomePessoa))]),t._v(" "),a("td",[t._v(t._s(e.pessoa.cpf))]),t._v(" "),a("td",[t._v(t._s(t._f("moment")(e.dataInicial,"DD/MM/Y")))]),t._v(" "),a("td",[t._v(t._s(t._f("moment")(e.dataFuncao,"DD/MM/Y")))]),t._v(" "),a("td",[t._v(t._s(e.funcao.cargo))]),t._v(" "),a("td",[t._v(t._s(t.formataEstabelecimento(e.ambienteTrabalho.estabelecimento))+"\n                                -\n                                "+t._s(e.ambienteTrabalho.nomeAmbienteTrabalho))]),t._v(" "),a("td",[t._v(t._s(t._f("moment")(e.pessoa.dataNascimento,"DD/MM/Y")))]),t._v(" "),a("td",[t._v(t._s(t.formataSexo(e.pessoa.sexo)))]),t._v(" "),a("td",[t._v(t._s(e.ano)+"A, "+t._s(e.mes)+"M,\n                                "+t._s(e.dia)+"D")]),t._v(" "),a("td",[t._v(t._s(e.empresaContrato.empresaContratante.nomeFantasia))])])})),0)])])])]),t._v(" "),a("b-modal",{ref:"modalEntrega",attrs:{title:"Entrega de EPI","cancel-title":"Cancelar","ok-title":"Salvar",size:"xl","hide-footer":t.entrega.idEntregaEpi>0&&!!t.entrega.dataAssinatura},on:{ok:t.salvar}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Matricula")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrega.empresaFuncionario.matricula,expression:"entrega.empresaFuncionario.matricula"}],staticClass:"form-control",attrs:{disabled:"",type:"text"},domProps:{value:t.entrega.empresaFuncionario.matricula},on:{input:function(e){e.target.composing||t.$set(t.entrega.empresaFuncionario,"matricula",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("CPF")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrega.empresaFuncionario.pessoa.cpf,expression:"entrega.empresaFuncionario.pessoa.cpf"}],staticClass:"form-control",attrs:{disabled:"",type:"text"},domProps:{value:t.entrega.empresaFuncionario.pessoa.cpf},on:{input:function(e){e.target.composing||t.$set(t.entrega.empresaFuncionario.pessoa,"cpf",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Nome")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrega.empresaFuncionario.pessoa.nomePessoa,expression:"entrega.empresaFuncionario.pessoa.nomePessoa"}],staticClass:"form-control",attrs:{disabled:"",type:"text"},domProps:{value:t.entrega.empresaFuncionario.pessoa.nomePessoa},on:{input:function(e){e.target.composing||t.$set(t.entrega.empresaFuncionario.pessoa,"nomePessoa",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group"},[a("label",{attrs:{for:""}},[t._v("Dt. Adm.")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrega.empresaFuncionario.dataInicial,expression:"entrega.empresaFuncionario.dataInicial"}],staticClass:"form-control",attrs:{type:"date",disabled:""},domProps:{value:t.entrega.empresaFuncionario.dataInicial},on:{input:function(e){e.target.composing||t.$set(t.entrega.empresaFuncionario,"dataInicial",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Contratante")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrega.empresaFuncionario.empresaContrato.empresaContratante.nomeFantasia,expression:"entrega.empresaFuncionario.empresaContrato.empresaContratante.nomeFantasia"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entrega.empresaFuncionario.empresaContrato.empresaContratante.nomeFantasia},on:{input:function(e){e.target.composing||t.$set(t.entrega.empresaFuncionario.empresaContrato.empresaContratante,"nomeFantasia",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Ambiente de Trabalho")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrega.empresaFuncionario.ambienteTrabalho.nomeAmbienteTrabalho,expression:"entrega.empresaFuncionario.ambienteTrabalho.nomeAmbienteTrabalho"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entrega.empresaFuncionario.ambienteTrabalho.nomeAmbienteTrabalho},on:{input:function(e){e.target.composing||t.$set(t.entrega.empresaFuncionario.ambienteTrabalho,"nomeAmbienteTrabalho",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Cargo")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrega.empresaFuncionario.funcao.cargo,expression:"entrega.empresaFuncionario.funcao.cargo"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entrega.empresaFuncionario.funcao.cargo},on:{input:function(e){e.target.composing||t.$set(t.entrega.empresaFuncionario.funcao,"cargo",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Entregue por")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrega.entregador,expression:"entrega.entregador"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entrega.entregador},on:{input:function(e){e.target.composing||t.$set(t.entrega,"entregador",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Data de Entrega")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entrega.data,expression:"entrega.data"}],staticClass:"form-control",attrs:{type:"date",id:"data"},domProps:{value:t.entrega.data},on:{input:function(e){e.target.composing||t.$set(t.entrega,"data",e.target.value)}}})])]),t._v(" "),t.entrega.idEntregaEpi>0?a("div",{staticClass:"col-md-1"},[a("button",{staticClass:"btn btn-lg btn-digital btn-success",attrs:{disabled:t.entrega.dataAssinatura},on:{click:t.digital}},[a("i",{staticClass:"fas fa-lg fa-fingerprint"})])]):t._e(),t._v(" "),t.entrega.idEntregaEpi>0?a("div",{staticClass:"col-md-2 btn-digital"},[t.entrega.dataAssinatura?t._e():a("span",{staticClass:"text-danger h5"},[t._v("\n                    Assinatura Pendente\n                ")]),t._v(" "),t.entrega.dataAssinatura?a("span",{staticClass:"text-success h5"},[t._v("\n                    Assinatura Coletada\n                ")]):t._e()]):t._e()]),t._v(" "),0==t.entrega.idEntregaEpi||!t.entrega.idEntregaEpi||!t.entrega.dataAssinatura&&t.eHoje(t.entrega)&&t.entrega.idEntregaEpi>0?a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12"},[a("h3",{staticClass:"titulo"},[t._v("Liberados para Entrega")])]),t._v(" "),a("div",{staticClass:"col-md-12"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",[t._v("ID")]),t._v(" "),a("th",[t._v("EPI")]),t._v(" "),a("th",[t._v("Unidade")]),t._v(" "),a("th",[t._v("Programado")]),t._v(" "),a("th",[t._v("Em Uso")]),t._v(" "),a("th",[t._v("Liberado")]),t._v(" "),a("th",[t._v("Carrinho")]),t._v(" "),a("th",[t._v("Validade")]),t._v(" "),a("th",[t._v("Uso")]),t._v(" "),a("th",[t._v("Ação")])])]),t._v(" "),a("tbody",t._l(t.liberados,(function(e){return a("tr",[a("td",[t._v(t._s(e.cadastroEpi.epi.idEpi))]),t._v(" "),a("td",[t._v(t._s(e.cadastroEpi.epi.categoriaEpi.grupoEpi.codigoGrupoEpi)+"."+t._s(e.cadastroEpi.epi.categoriaEpi.codigoCategoria)+" - "+t._s(e.cadastroEpi.epi.codigoNr6)+" "+t._s(e.cadastroEpi.epi.descricao))]),t._v(" "),a("td",[t._v(t._s(e.cadastroEpi.epi.unidade))]),t._v(" "),a("td",[t._v(t._s(e.quantidade))]),t._v(" "),a("td",[t._v(t._s(e.quantidadeEmUso))]),t._v(" "),a("td",[0!=t.entrega.idEntregaEpi&&t.entrega.idEntregaEpi?t._e():a("span",[t._v("\n                                    "+t._s(e.quantidade-e.quantidadeEmUso-t.qtdCarrinho(e))+"\n                                ")]),t._v(" "),!t.entrega.dataAssinatura&&t.eHoje(t.entrega)&&t.entrega.idEntregaEpi>0?a("span",[t._v("\n                                    "+t._s(e.quantidade-e.quantidadeEmUso-t.qtdCarrinho(e)+e.carrinho)+"\n                                ")]):t._e()]),t._v(" "),a("td",[t._v(t._s(t.qtdCarrinho(e)))]),t._v(" "),a("td",[t._v(t._s(e.validade))]),t._v(" "),a("td",[t._v(t._s(e.uso))]),t._v(" "),a("td",[a("button",{staticClass:"btn btn-outline-success btn-sm",attrs:{disabled:e.quantidade-e.quantidadeEmUso-t.qtdCarrinho(e)<=0},on:{click:function(a){return t.abrirEstoque(e)}}},[a("i",{staticClass:"fas fa-list"})])])])})),0)])])]):t._e(),t._v(" "),a("div",{staticClass:"row"},[t.entregaItens.length>0&&(0==t.entrega.idEntregaEpi||!t.entrega.idEntregaEpi)?a("div",{staticClass:"col-md-12"},[a("h3",{staticClass:"titulo"},[t._v("Itens Adicionados ao Carrinho")])]):t._e(),t._v(" "),t.entregaItens.length>0&&t.entrega.idEntregaEpi>0?a("div",{staticClass:"col-md-12"},[a("h3",{staticClass:"titulo"},[t._v("Itens da entrega")])]):t._e(),t._v(" "),t.entregaItens.length>0?a("div",{staticClass:"col-md-12"},[a("table",{staticClass:"table table-striped"},[a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("ID")]),t._v(" "),a("th",[t._v("Descrição")]),t._v(" "),a("th",[t._v("Cor")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Tamanho")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("C.A")]),t._v(" "),t.entregaItens.length>0&&t.entrega.idEntregaEpi>0?a("th",[t._v("Val. do CA")]):t._e(),t._v(" "),a("th",[t._v("Fabricante")]),t._v(" "),a("th",{staticStyle:{width:"100px"}},[t._v("Quantidade")]),t._v(" "),t.entregaItens.length>0&&t.entrega.idEntregaEpi>0?a("th",[t._v("Val. Max. Até")]):t._e(),t._v(" "),a("th",[t._v("Intervenção")]),t._v(" "),a("th",{staticStyle:{width:"103px","text-align":"center"}},[t._v("Ação")])])]),t._v(" "),a("tbody",t._l(t.entregaItens,(function(e,o){return a("tr",{class:{"bg-warning":0==e.estoque.idEstoque}},[a("td",{staticClass:"text-center"},[t._v(t._s(e.estoque.gradeEmpresaEpi.idOrigem))]),t._v(" "),a("td",[t._v(t._s(e.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.epi.descricao))]),t._v(" "),a("td",[t._v(t._s(e.estoque.gradeEmpresaEpi.cor.descricao))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.estoque.gradeEmpresaEpi.tamanho.descricao))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.estoque.gradeEmpresaEpi.cadastroEpiCa.ca))]),t._v(" "),t.entregaItens.length>0&&t.entrega.idEntregaEpi>0?a("td",{class:{"text-danger":t.vencido(e.estoque.gradeEmpresaEpi.cadastroEpiCa.validade)}},[t._v("\n                                "+t._s(t._f("moment")(e.estoque.gradeEmpresaEpi.cadastroEpiCa.validade,"DD/MM/YYYY"))+"\n                            ")]):t._e(),t._v(" "),a("td",[t._v(t._s(e.estoque.gradeEmpresaEpi.cadastroEpiCa.fabricante))]),t._v(" "),a("td",{staticClass:"text-center"},[0!=t.entrega.idEntregaEpi&&t.entrega.idEntregaEpi&&t.entrega.dataAssinatura?t._e():a("select",{directives:[{name:"model",rawName:"v-model",value:e.quantidade,expression:"entregaitem.quantidade"}],staticClass:"form-control",on:{change:function(a){var o=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(e,"quantidade",a.target.multiple?o:o[0])}}},t._l(t.limite(e),(function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})),0),t._v(" "),t.entrega.idEntregaEpi>0&&t.entrega.dataAssinatura?a("span",[t._v(t._s(e.quantidade))]):t._e()]),t._v(" "),a("td",{class:{"text-danger":t.vencido(e.validade)}},[t._v("\n                                "+t._s(t._f("moment")(e.validade,"DD/MM/YYYY"))+"\n                            ")]),t._v(" "),a("td",[e.historico?a("span",[t._v("\n                                    "+t._s(e.historico[0].ocorrencia.replace(/_.*/,""))+" - "+t._s(e.historico.reduce((function(t,e){return t+e.quantidade}),0))+"\n                                ")]):t._e()]),t._v(" "),a("td",{staticClass:"text-center"},[e.historico?a("span",[a("button",{staticClass:"btn btn-outline-primary btn-sm",on:{click:function(a){return t.abrirHistorico(e.historico)}}},[a("i",{staticClass:"fas fa-eye"})])]):t._e(),t._v(" "),e.historico&&"BLOQUEIO"!=e.historico[0].ocorrencia.replace(/_.*/,"")&&e.historico.reduce((function(t,e){return t+e.quantidade}),0)<e.quantidade||!e.historico?a("span",{staticClass:"d-inline"},[(0==t.entrega.idEntregaEpi||!t.entrega.idEntregaEpi||t.entrega.dataAssinatura)&&e.idEntregaEpiItens>0&&!t.vencido(e.validade)?a("div",{staticClass:"dropdown d-inline-block"},[a("button",{staticClass:"btn btn-outline-success btn-sm dropdown-toggle",attrs:{type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"}},[a("i",{staticClass:"fas fa-pencil-alt"})]),t._v(" "),a("div",{staticClass:"dropdown-menu",attrs:{"aria-labelledby":"dropdownMenuButton"}},[t.diff(t.entrega.data)&&!e.historico?a("button",{staticClass:"dropdown-item",on:{click:function(a){return t.abrirBloquear(e)}}},[t._v("Bloquear ")]):t._e(),t._v(" "),t.vencido(e.validade)?t._e():a("button",{staticClass:"dropdown-item",on:{click:function(a){return t.abrirTrocar(e)}}},[t._v("Trocar")])])]):t._e()]):t._e(),t._v(" "),0!=t.entrega.idEntregaEpi&&t.entrega.idEntregaEpi&&t.entrega.dataAssinatura?t._e():a("button",{staticClass:"btn btn-outline-danger btn-sm",on:{click:function(e){return t.removerItem(o)}}},[a("i",{staticClass:"fas fa-trash"})])])])})),0)])]):t._e()])]),t._v(" "),a("b-modal",{ref:"itensModal",attrs:{title:"Itens no Estoque","hide-footer":"",size:"lg"},on:{ok:t.adicionarItem}},[a("table",{staticClass:"table table-hover table-striped",attrs:{id:"tabelaItens"}},[a("thead",[a("tr",[a("th",{staticClass:"text-center"},[t._v("ID")]),t._v(" "),a("th",[t._v("Descrição")]),t._v(" "),a("th",[t._v("Cor")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("Tamanho")]),t._v(" "),a("th",{staticClass:"text-center"},[t._v("C.A")]),t._v(" "),a("th",[t._v("Fabricante")]),t._v(" "),a("th",[t._v("Quantidade em Estoque")])])]),t._v(" "),a("tbody",t._l(t.estoques,(function(e){return t.estaAdicionado(e)?t._e():a("tr",{class:{selecionado:t.selecionado==e},staticStyle:{cursor:"pointer"},on:{click:function(a){return t.selecionarItem(e)}}},[a("td",{staticClass:"text-center"},[t._v(t._s(e.gradeEmpresaEpi.idOrigem))]),t._v(" "),a("td",[t._v(t._s(e.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.epi.descricao))]),t._v(" "),a("td",[t._v(t._s(e.gradeEmpresaEpi.cor.descricao))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.gradeEmpresaEpi.tamanho.descricao))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.gradeEmpresaEpi.cadastroEpiCa.ca))]),t._v(" "),a("td",[t._v(t._s(e.gradeEmpresaEpi.cadastroEpiCa.fabricante))]),t._v(" "),a("td",[t._v(t._s(e.quantidadeEstoque))])])})),0)])]),t._v(" "),a("b-modal",{ref:"modalCerteza",attrs:{size:"sm","no-close-on-backdrop":!0,centered:"","hide-header":!0,"hide-footer":!0,"no-close-on-esc":!0,id:"modalCerteza"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("h3",[t._v("Tem certeza que deseja excluir? ")])])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"col-md-6 text-center"},[a("button",{staticClass:"btn btn-block btn-secondary btn-lg",attrs:{type:"button"},on:{click:t.fecharCerteza}},[a("i",{staticClass:"fas fa-close"}),t._v(" Não\n                ")])]),t._v(" "),a("div",{staticClass:"col-md-6 text-center"},[a("button",{staticClass:"btn btn-block btn-danger btn-lg",attrs:{type:"button"},on:{click:t.certeza}},[a("i",{staticClass:"fa fa-check"}),t._v(" Sim\n                ")])])])]),t._v(" "),a("b-modal",{ref:"modalBloquear",attrs:{"no-close-on-backdrop":!0,centered:"",title:"Bloquear entrega","cancel-title":"Cancelar","ok-title":"Salvar","no-close-on-esc":!0,id:"modalBloquear"},on:{ok:t.salvarHistorico}},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-5"},[a("label",[t._v("Descrição")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.epi.descricao,expression:"entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.epi.descricao"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.epi.descricao},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.epi,"descricao",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("label",[t._v("Cor")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cor.descricao,expression:"entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cor.descricao"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cor.descricao},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cor,"descricao",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("label",[t._v("Cor")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.tamanho.descricao,expression:"entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.tamanho.descricao"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.tamanho.descricao},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.tamanho,"descricao",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("label",[t._v("CA")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.ca,expression:"entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.ca"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.ca},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa,"ca",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-5"},[a("label",[t._v("Fabricante")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.fabricante,expression:"entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.fabricante"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.fabricante},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa,"fabricante",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("label",[t._v("Qnt")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.quantidade,expression:"entregaItemHistorico.entregaEpiItens.quantidade"}],staticClass:"form-control",attrs:{type:"text",readonly:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.quantidade},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens,"quantidade",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("label",[t._v("Data")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.data,expression:"entregaItemHistorico.data"}],staticClass:"form-control",attrs:{type:"date",max:t._f("moment")(t.dataMaxima,"YYYY-MM-DD"),min:t.entrega.data},domProps:{value:t.entregaItemHistorico.data},on:{blur:t.testaDataBloqueio,input:function(e){e.target.composing||t.$set(t.entregaItemHistorico,"data",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-12"},[a("label",[t._v("Motivo do Bloqueio")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.ocorrencia,expression:"entregaItemHistorico.ocorrencia"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.entregaItemHistorico,"ocorrencia",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"BLOQUEIO_POR_COR_ERRADA"}},[t._v("Bloqueio por cor errada")]),t._v(" "),a("option",{attrs:{value:"BLOQUEIO_POR_TAMANHO_ERRADO"}},[t._v("Bloqueio por tamanho errado")]),t._v(" "),a("option",{attrs:{value:"BLOQUEIO_POR_ENTREGA_ERRADA"}},[t._v("Bloqueio por entrega errada")])])])])]),t._v(" "),a("b-modal",{ref:"modalTrocar",attrs:{"no-close-on-backdrop":!0,centered:"",title:"Trocar entrega","cancel-title":"Cancelar","ok-title":"Salvar","no-close-on-esc":!0,id:"modalTrocar"},on:{ok:t.salvarHistorico}},[a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-5"},[a("label",[t._v("Descrição")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.epi.descricao,expression:"entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.epi.descricao"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.epi.descricao},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.cadastroEpi.epi,"descricao",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("label",[t._v("Cor")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cor.descricao,expression:"entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cor.descricao"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cor.descricao},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cor,"descricao",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("label",[t._v("Tam")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.tamanho.descricao,expression:"entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.tamanho.descricao"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.tamanho.descricao},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.tamanho,"descricao",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("label",[t._v("CA")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.ca,expression:"entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.ca"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.ca},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa,"ca",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-5"},[a("label",[t._v("Fabricante")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.fabricante,expression:"entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.fabricante"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa.fabricante},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens.estoque.gradeEmpresaEpi.cadastroEpiCa,"fabricante",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-2"},[a("label",[t._v("Qnt")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.entregaEpiItens.quantidade,expression:"entregaItemHistorico.entregaEpiItens.quantidade"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.entregaItemHistorico.entregaEpiItens.quantidade},on:{input:function(e){e.target.composing||t.$set(t.entregaItemHistorico.entregaEpiItens,"quantidade",e.target.value)}}})]),t._v(" "),a("div",{staticClass:"col-md-5"},[a("label",[t._v("Data")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.data,expression:"entregaItemHistorico.data"}],staticClass:"form-control",attrs:{type:"date",max:t._f("moment")(t.entregaItemHistorico.entregaEpiItens.validade,"YYYY-MM-DD"),min:t.entrega.data},domProps:{value:t.entregaItemHistorico.data},on:{blur:t.testaDataTroca,input:function(e){e.target.composing||t.$set(t.entregaItemHistorico,"data",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"row mt-3"},[a("div",{staticClass:"col-md-9"},[a("label",[t._v("Motivo da troca")]),t._v(" "),a("select",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.ocorrencia,expression:"entregaItemHistorico.ocorrencia"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.entregaItemHistorico,"ocorrencia",e.target.multiple?a:a[0])}}},[a("option",{attrs:{value:"TROCA_POR_DEFEITO"}},[t._v("Troca por defeito")]),t._v(" "),a("option",{attrs:{value:"TROCA_POR_AVARIA"}},[t._v("Troca por avaria")]),t._v(" "),a("option",{attrs:{value:"TROCA_POR_EXTRAVIO"}},[t._v("Troca por extravio")]),t._v(" "),a("option",{attrs:{value:"TROCA_POR_DESGASTE"}},[t._v("Troca por desgaste")])])]),t._v(" "),a("div",{staticClass:"col-md-3"},[a("label",[t._v("Quantidade")]),t._v(" "),isNaN(t.trocados)?t._e():a("select",{directives:[{name:"model",rawName:"v-model",value:t.entregaItemHistorico.quantidade,expression:"entregaItemHistorico.quantidade"}],staticClass:"form-control",on:{change:function(e){var a=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){return"_value"in t?t._value:t.value}));t.$set(t.entregaItemHistorico,"quantidade",e.target.multiple?a:a[0])}}},t._l(t.entregaItemHistorico.entregaEpiItens.quantidade-t.trocados,(function(e){return a("option",{domProps:{value:e}},[t._v(t._s(e))])})),0)])])]),t._v(" "),a("b-modal",{ref:"modalHistorico",attrs:{"no-close-on-backdrop":!0,size:"md",centered:"",title:"Histórico do item","cancel-only":"","cancel-title":"Fechar","no-close-on-esc":!0,id:"modalHistorico"}},[a("table",{staticClass:"table"},[a("thead",[a("tr",[a("th",[t._v("ID")]),t._v(" "),a("th",[t._v("Data")]),t._v(" "),a("th",[t._v("Motivo")]),t._v(" "),a("th",[t._v("Quantidade")]),t._v(" "),a("th",[t._v("Realizado Por")])])]),t._v(" "),a("tbody",t._l(t.historicos,(function(e){return a("tr",[a("td",[t._v(t._s(e.idEntregaEpiItensHistorico))]),t._v(" "),a("td",[t._v(t._s(t._f("moment")(e.data,"DD/MM/YYYY")))]),t._v(" "),a("td",[t._v(t._s(t.formatarHistorico(e)))]),t._v(" "),a("td",{staticClass:"text-center"},[t._v(t._s(e.quantidade))]),t._v(" "),a("td")])})),0)])])],1)}),[],!1,null,"ffd7ff4c",null);e.default=r.exports},181:function(t,e,a){var o=a(332);"string"==typeof o&&(o=[[t.i,o,""]]);var s={hmr:!0,transform:void 0,insertInto:void 0};a(2)(o,s);o.locals&&(t.exports=o.locals)},331:function(t,e,a){"use strict";a(181)},332:function(t,e,a){(t.exports=a(1)(!1)).push([t.i,".titulo[data-v-ffd7ff4c]{text-align:center;background-color:#00a65a;padding:6px;color:#fff;font-size:17px;margin-top:10px}.selecionado[data-v-ffd7ff4c]{background-color:#71bb66!important}.bg-warning[data-v-ffd7ff4c]{background-color:#fde4bc!important}tr.bg-primary[data-v-ffd7ff4c]{background-color:#c0b5fd!important}.btn-digital[data-v-ffd7ff4c]{margin-top:20px}",""])},8:function(t,e,a){"use strict";a.r(e);var o={data:function(){return{tamanhos:[],erro:!1,editar:!1,carregando:!0,mensagem:"Carregando tamanhos cadastradas...",html:'<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>',montou:!1,deletar:"",coluna:"",ordem:!0,termo:"",selecionado:"codigo",idTabela:"#tabelaListagem",tamanho:{idTamanho:0,descricao:"",observacao:""}}},methods:{carregar:function(t){this.mensagem=t,this.html='<i class="fa fa-spinner fa-spin fa-2x fa-fw"></i>',this.carregando=!0},sucesso:function(t){this.mensagem=t,this.html='<i class="fa fa-check-circle fa-2x fa-fw"></i>';var e=this;setTimeout((function(){e.carregando=!1}),800)},alerta:function(t){this.mensagem=t,this.html='<i class="fa fa-close fa-2x fa-fw"></i>';var e=this;setTimeout((function(){e.carregando=!1}),1e3)},salvar:function(){this.carregar("Salvando nova tamanho...");var t=this;axios.post("/tabelas/epi/tamanho",{tamanho:t.tamanho}).then((function(e){t.tamanhos=e.data,t.$nextTick((function(){t.fechar(),t.sucesso("Salvo com sucesso!")}))}))},atualizar:function(){var t=this;this.carregar("Atualizando nova tamanho..."),""!=this.nome||""!=this.codigo?axios.post("/tabelas/epi/tamanhos/"+this.id,{nome:t.nome,codigo:t.codigo,grupo:t.grupo.idGrupoEpi}).then((function(e){console.log(e.data),"existente"==e.data?(t.codigo="",t.erro=!0,t.alerta("Código já existente, verifique!")):(t.tamanhos=e.data,t.nome="",t.codigo="",t.grupo="",t.erro=!1,t.$nextTick((function(){t.fechar(),t.sucesso("Atualizado com sucesso!")})))})):t.alerta("Preencha todos os campos")},abrir:function(){$(this.idTabela).DataTable().destroy(),this.tamanho={idTamanho:0,descricao:"",observacao:""},this.$refs.myModal.show()},preencher:function(t){this.carregar("Carregando dados..."),console.log(t),this.tamanho=t,this.editar=!0,$(this.idTabela).DataTable().destroy(),this.$refs.myModal.show(),this.sucesso("Dados carregados!")},remover:function(t){this.deletar=t.idTamanho,this.$refs.modalCerteza.show(),$(this.idTabela).DataTable().destroy()},ok:function(t){t.preventDefault(),this.salvar()},fechar:function(){this.$root.$emit("montou",[this.idTabela]),this.editar=!1,this.descricao="",this.codigo="",this.nome="",this.grupo="",this.$refs.myModal.hide()},fecharCerteza:function(){this.$root.$emit("montou",[this.idTabela]),this.$refs.modalCerteza.hide()},certeza:function(){this.carregar("Removendo tamanho...");var t=this;axios.get("/tabelas/epi/tamanho/remover/"+this.deletar).then((function(e){"erro"!=e.data?(t.tamanhos=e.data,t.$nextTick((function(){t.fecharCerteza(),t.sucesso("Excluido com sucesso!")}))):t.$nextTick((function(){t.fecharCerteza(),t.alerta("Erro ao excluir!")}))}))}},mounted:function(){var t=this;axios.get("http://34.69.79.135:8080/ServicoSIGSSO/rest/tamanhos").then((function(e){t.tamanhos=e.data,t.montou=!0,setTimeout((function(){t.$root.$emit("montou",[t.idTabela]),t.carregando=!1}),200)}))}},s=a(0),r=Object(s.a)(o,(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"content"},[t.carregando?a("BlockUI",{attrs:{message:t.mensagem,html:t.html}}):t._e(),t._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-bottom":"15px","margin-top":"10px"}},[a("div",{staticClass:"col-md-6"},[a("button",{staticClass:"btn btn-success btn-sm",attrs:{id:"modal",type:"button"},on:{click:t.abrir}},[a("i",{staticClass:"fa fa-plus"}),t._v(" Incluir")]),t._v(" "),t.montou?a("download-excel",{staticClass:"btn btn-sm btn-secondary",attrs:{data:this.tamanhos,name:"tamanhos.xls"}},[a("i",{staticClass:"far fa-save"}),t._v(" Exportar\n            ")]):t._e()],1)]),t._v(" "),t.montou?a("div",{staticClass:"box box-info"},[a("div",{staticClass:"box-body table-responsive"},[a("table",{staticClass:"table table-hover table-striped",attrs:{id:"tabelaListagem"}},[t._m(0),t._v(" "),a("tbody",t._l(t.tamanhos,(function(e){return a("tr",[a("td",{staticStyle:{"vertical-align":"middle",width:"100px"}},[a("b",[t._v(t._s(e.idTamanho))])]),t._v(" "),a("td",{staticStyle:{"text-align":"justify"}},[t._v(t._s(e.descricao))]),t._v(" "),a("td",{staticStyle:{"text-align":"justify"}},[t._v(t._s(e.observacao))]),t._v(" "),a("td",{staticClass:"text-center",staticStyle:{"vertical-align":"middle"},attrs:{width:"100px"}},[a("button",{staticClass:"btn btn-sm btn-outline-danger",attrs:{type:"button"},on:{click:function(a){return t.remover(e)}}},[a("i",{staticClass:"fa fa-trash"})]),t._v(" "),a("button",{staticClass:"btn btn-sm btn-outline-primary",attrs:{type:"button"},on:{click:function(a){return t.preencher(e)}}},[a("i",{staticClass:"fas fa-pencil-alt"})])])])})),0)])])]):t._e(),t._v(" "),a("b-modal",{ref:"myModal",attrs:{size:"xl",centered:"","no-close-on-backdrop":!0,"hide-header-close":!0,"no-close-on-esc":!0,title:"Detalhes da Cor EPI","ok-title":"Salvar","cancel-title":"Cancelar",id:"modal1"},on:{ok:t.ok,cancel:function(e){return t.fechar()}}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-2"},[a("div",{staticClass:"form-group"},[a("label",[t._v("ID")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tamanho.idTamanho,expression:"tamanho.idTamanho"}],staticClass:"form-control",attrs:{type:"text",disabled:""},domProps:{value:t.tamanho.idTamanho},on:{input:function(e){e.target.composing||t.$set(t.tamanho,"idTamanho",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-4"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Descrição")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tamanho.descricao,expression:"tamanho.descricao"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.tamanho.descricao},on:{input:function(e){e.target.composing||t.$set(t.tamanho,"descricao",e.target.value)}}})])]),t._v(" "),a("div",{staticClass:"col-md-6"},[a("div",{staticClass:"form-group"},[a("label",[t._v("Observação")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.tamanho.observacao,expression:"tamanho.observacao"}],staticClass:"form-control",attrs:{type:"text"},domProps:{value:t.tamanho.observacao},on:{input:function(e){e.target.composing||t.$set(t.tamanho,"observacao",e.target.value)}}})])])])]),t._v(" "),a("b-modal",{ref:"modalCerteza",attrs:{size:"sm","no-close-on-backdrop":!0,centered:"","hide-header":!0,"hide-footer":!0,"no-close-on-esc":!0,id:"modalCerteza"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-12 text-center"},[a("h3",[t._v("Tem certeza que deseja excluir esta tamanho?")])])]),t._v(" "),a("div",{staticClass:"row",staticStyle:{"margin-top":"20px"}},[a("div",{staticClass:"col-md-6 text-center"},[a("button",{staticClass:"btn btn-block btn-secondary btn-lg",attrs:{type:"button"},on:{click:t.fecharCerteza}},[a("i",{staticClass:"fa fa-close"}),t._v(" Não")])]),t._v(" "),a("div",{staticClass:"col-md-6 text-center"},[a("button",{staticClass:"btn btn-block btn-danger btn-lg",attrs:{type:"button"},on:{click:t.certeza}},[a("i",{staticClass:"fa fa-check"}),t._v(" Sim")])])])])],1)}),[function(){var t=this.$createElement,e=this._self._c||t;return e("thead",[e("tr",[e("th",[this._v("\n                            ID\n                        ")]),this._v(" "),e("th",[this._v("\n                            Descrição\n                        ")]),this._v(" "),e("th",[this._v("\n                            Observação\n                        ")]),this._v(" "),e("th",{staticClass:"text-center no-sort"},[this._v("Ações")])])])}],!1,null,null,null);e.default=r.exports}}]);